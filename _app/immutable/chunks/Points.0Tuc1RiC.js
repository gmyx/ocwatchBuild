const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./leaflet-src.CgdewqBa.js","./inferColumnTypes.B7BPdMWL.js","./index.rV6zwFgL.js","./entry.BUeAk5M5.js","./scheduler.CwZefb0o.js","./preload-helper.C1FmrZbK.js"])))=>i.map(i=>d[i]);
var Mt=Object.defineProperty;var it=n=>{throw TypeError(n)};var Wt=(n,e,t)=>e in n?Mt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var We=(n,e,t)=>Wt(n,typeof e!="symbol"?e+"":e,t),lt=(n,e,t)=>e.has(n)||it("Cannot "+t);var w=(n,e,t)=>(lt(n,e,"read from private field"),t?t.call(n):e.get(n)),B=(n,e,t)=>e.has(n)?it("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),J=(n,e,t,l)=>(lt(n,e,"write to private field"),l?l.call(n,t):e.set(n,t),t);import{s as me,e as T,J as he,a as M,d as D,t as E,K as ce,f as L,c as W,i as v,j as V,k as p,n as Z,V as ze,U as ne,L as pe,_ as ot,$ as st,v as Te,N as Ot,O as St,b as R,l as De,u as Y,P as Fe,p as Ft,q as Pt,Q as At,r as jt,x as Jt,y as Ht,z as qt,S as Rt,m as at}from"./scheduler.CwZefb0o.js";import{S as ge,i as _e,t as S,g as U,a as z,c as G,b as le,d as oe,m as se,e as ae}from"./index.RfiDZozx.js";import{A as Ut,B as ve,F as Gt,G as Kt,H as rt,j as ie,a as Et,S as Qt,J as Xt,n as Yt}from"./VennDiagram.svelte_svelte_type_style_lang.DO7fS-r7.js";import{_ as xt}from"./preload-helper.C1FmrZbK.js";import{d as $t,n as en}from"./inferColumnTypes.B7BPdMWL.js";import{w as Oe,a as ut,d as Ae}from"./entry.BUeAk5M5.js";import{h as ft,u as tn}from"./await_block.D0dlHOKG.js";import{g as nn}from"./inputs.B-6hjrb4.js";const ln={trailing:!0};function on(n,e=25,t={}){if(t={...ln,...t},!Number.isFinite(e))throw new TypeError("Expected `wait` to be a finite number");let l,i,r=[],o,s;const a=(d,u)=>(o=sn(n,d,u),o.finally(()=>{if(o=null,t.trailing&&s&&!i){const h=a(d,s);return s=null,h}}),o);return function(...d){return o?(t.trailing&&(s=d),o):new Promise(u=>{const h=!i&&t.leading;clearTimeout(i),i=setTimeout(()=>{i=null;const f=t.leading?l:a(this,d);for(const m of r)m(f);r=[]},e),h?(l=a(this,d),u(l)):r.push(u)})}}async function sn(n,e,t){return await n.apply(e,t)}function an(n){n.Map.mergeOptions({smoothWheelZoom:!0,smoothSensitivity:1}),n.Map.SmoothWheelZoom=n.Handler.extend({addHooks:function(){n.DomEvent.on(this._map._container,"wheel",this._onWheelScroll,this)},removeHooks:function(){n.DomEvent.off(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){this._isWheeling||this._onWheelStart(e),this._onWheeling(e)},_onWheelStart:function(e){var t=this._map;this._isWheeling=!0,this._wheelMousePosition=t.mouseEventToContainerPoint(e),this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),this._wheelStartLatLng=t.containerPointToLatLng(this._wheelMousePosition),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),t._panAnim&&t._panAnim.stop(),this._goalZoom=t.getZoom(),this._prevCenter=t.getCenter(),this._prevZoom=t.getZoom(),this._zoomAnimationId=requestAnimationFrame(this._updateWheelZoom.bind(this))},_onWheeling:function(e){var t=this._map;this._goalZoom=this._goalZoom+n.DomEvent.getWheelDelta(e)*.003*t.options.smoothSensitivity,(this._goalZoom<t.getMinZoom()||this._goalZoom>t.getMaxZoom())&&(this._goalZoom=t._limitZoom(this._goalZoom)),this._wheelMousePosition=this._map.mouseEventToContainerPoint(e),clearTimeout(this._timeoutId),this._timeoutId=setTimeout(this._onWheelEnd.bind(this),200),n.DomEvent.preventDefault(e),n.DomEvent.stopPropagation(e)},_onWheelEnd:function(){this._isWheeling=!1,cancelAnimationFrame(this._zoomAnimationId),this._map._moveEnd(!0)},_updateWheelZoom:function(){var e=this._map;if(!(!e.getCenter().equals(this._prevCenter)||e.getZoom()!=this._prevZoom)){this._zoom=e.getZoom()+(this._goalZoom-e.getZoom())*.3,this._zoom=Math.floor(this._zoom*100)/100;var t=this._wheelMousePosition.subtract(this._centerPoint);t.x===0&&t.y===0||(e.options.smoothWheelZoom==="center"?this._center=this._startLatLng:this._center=e.unproject(e.project(this._wheelStartLatLng,this._zoom).subtract(t),this._zoom),this._moved||(e._moveStart(!0,!1),this._moved=!0),e._move(this._center,this._zoom),this._prevCenter=e.getCenter(),this._prevZoom=e.getZoom(),this._zoomAnimationId=requestAnimationFrame(this._updateWheelZoom.bind(this)))}}}),n.Map.addInitHook("addHandler","smoothWheelZoom",n.Map.SmoothWheelZoom)}let A;var I,q,x,de,$,H,ke,ee,Ce,te,Se,Pe,Ee;const ye=class ye{constructor(){B(this,I);B(this,q,null);B(this,x,new Map);B(this,de);B(this,$,$t());B(this,H);B(this,ke,!1);B(this,ee);We(this,"updateBounds",on(()=>{if(J(this,H,A.latLngBounds()),w(this,I).eachLayer(e=>{(e instanceof A.Marker||e instanceof A.CircleMarker||e instanceof A.GeoJSON)&&w(this,H).extend(e.getBounds?e.getBounds():e.getLatLng())}),w(this,H).isValid())w(this,I).fitBounds(w(this,H),{maxZoom:12}),w(this,ee)&&w(this,I).setZoom(w(this,ee));else throw console.error("Bounds are invalid!",w(this,H)),new Error("Bounds are invalid!")},100));B(this,te,Oe(new Map));We(this,"allGeoJsonLoaded",Ae(w(this,te),e=>Array.from(e.values()).every(Boolean)));B(this,Se,Oe("bottomLeft"));B(this,Pe,Oe([]));B(this,Ee,[]);J(this,q,null),J(this,x,new Map)}get initPromise(){return w(this,$).promise}get mapEl(){return w(this,de)}async init(e,t,l,i,r=!1){if(A||(w(this,$).start(),A=await xt(()=>import("./leaflet-src.CgdewqBa.js").then(s=>s.l),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(s=>{const a=s.default;return an(a),a}).catch(s=>{w(this,$).reject(s)})),J(this,ee,i),w(this,de)){const s=new Error("Evidence Map already initialized");throw w(this,$).reject(s),s}J(this,de,e),J(this,I,A.map(w(this,de),{zoomControl:!1,scrollWheelZoom:!1,smoothWheelZoom:!0,smoothSensitivity:5}).setView(l,i??5)),r&&J(this,ke,!0);const o=this.processBasemapUrl(t);A.tileLayer(o,{subdomains:"abcd",maxZoom:20}).addTo(w(this,I)),w(this,I).removeControl(w(this,I).attributionControl),J(this,H,A.latLngBounds()),w(this,$).resolve()}cleanup(){w(this,I).remove()}addArea(e,t,l,i,r,o,s,a,d){if(!A)throw new Error("Leaflet is not yet available");this.lastSelectedLayer||(this.lastSelectedLayer=null),this.originalStyles||(this.originalStyles=new Map);const u=A.geoJSON(l,{...i,onEachFeature:(h,f)=>{this.originalStyles.set(f,i),f.on("click",()=>{this.lastSelectedLayer===f?(f.setStyle(this.originalStyles.get(f)),a(e,t),this.lastSelectedLayer=null):(this.lastSelectedLayer&&this.lastSelectedLayer.setStyle(this.originalStyles.get(this.lastSelectedLayer)),f.bringToFront(),f.setStyle(r),s(e,t),this.lastSelectedLayer=f),o(h),d&&(window.location.href=d)})}}).addTo(w(this,I));return w(this,H).extend(u.getBounds()),w(this,ke)?w(this,I).setZoom(w(this,ee)??5):this.updateBounds(),u.bringToBack(),u}addCircle(e,t,l,i,r,o,s,a,d){if(!A)throw new Error("Leaflet is not yet available");w(this,I).getPane(l.pane)||(w(this,I).createPane(l.pane),w(this,Ee).forEach((h,f)=>{h===l.pane&&(w(this,I).getPane(h).style.zIndex=400+f)}));const u=A.circleMarker(r,l);return u.addTo(w(this,I)),this.updateMarkerStyle(u,l),u.on("click",()=>{if(o(),w(this,q)===u){const h={...w(this,x).get(u)};this.updateMarkerStyle(u,h),J(this,q,null),a(t),o(null)}else{if(w(this,q)){const h={...w(this,x).get(w(this,q))};this.updateMarkerStyle(w(this,q),h)}this.updateMarkerStyle(u,i),J(this,q,u),s(e,t),o(u)}u.bringToFront(),d&&(window.location.href=d)}),r&&Array.isArray(r)&&r.length===2&&!w(this,ke)?(w(this,H).extend(r),this.updateBounds()):w(this,I).setZoom(w(this,ee)??5),u}updateMarkerStyle(e,t){e.setStyle(t),w(this,x).has(e)||w(this,x).set(e,{...t})}buildTooltip(e,t){let l="",i=t.map(r=>({id:r.id,title:r.title??r.id,showColumnName:r.showColumnName===void 0?!0:r.showColumnName,fieldClass:r.fieldClass??"default-field-class",valueClass:r.valueClass??"default-value-class",fmt:r.fmt??"num0",formatColumnTitle:r.formatColumnTitle===void 0&&r.title===void 0?!0:r.formatColumnTitle,contentType:r.contentType??"text",linkLabel:r.linkLabel??void 0}));if(i)for(let r=0;r<i.length;r++)l+=`<div class='flex justify-between items-center ${i[r].rowClass||""}'>`+(i[r].showColumnName?`<span class='font-bold pr-5 ${i[r].fieldClass}'>${i[r].formatColumnTitle?Ut(i[r].title):i[r].title}</span>`:"")+(i[r].contentType==="link"?`<a href='${e[i[r].id]}' class='${i[r].valueClass}'>${i[r].linkLabel?i[r].linkLabel:ve(e[i[r].id],i[r].fmt)}</a>`:`<span class='${i[r].valueClass}'>${ve(e[i[r].id],i[r].fmt)}</span>`)+"</div>";return l}attachTooltip(e,t,l,i){i==="hover"?e.bindTooltip(t,l):i==="click"?e.bindPopup(t,l):console.error("tooltipType must be 'hover' or 'click'")}processBasemapUrl(e){const t=window.devicePixelRatio||1;let l=e;return l.includes("{r}")&&(l=l.replace("{r}",t>1?"@2x":"")),l.includes("{ext}")&&(l=l.replace("{ext}","png")),l}get geoJsonData(){return ut(w(this,te))}async loadGeoJson(e){const t=w(ye,Ce).get(e);if(t)return t;const l=fetch(e).then(r=>r.json()).catch(r=>{w(this,te).update(o=>(o.delete(e),o)),console.error(`Failed to load GeoJSON at URL '${e}': ${r}`)});w(ye,Ce).set(e,l),w(this,te).update(r=>r.set(e,null));const i=await l;return w(this,te).update(r=>(i?r.set(e,i):r.delete(e),r)),i}handleLegendValues(e,t,l){if(l==="categorical"){t=[...new Set(t)];let r=0;for(;e.length<t.length;)r>=e.length&&(r=0),e.push(e[r]),r++}else l==="scalar"&&t.forEach(i=>{typeof i!="number"&&i!==null&&console.error("Scalar legend requires numeric values or null."),typeof i=="number"&&isNaN(i)&&console.error("Scalar legend requires valid numeric values.")});return t}handleFillColor(e,t,l,i,r){if(!t)return Gt.blue700;if(e[t])return typeof e[t]=="string"?i[l.indexOf(e[t])]:r(e[t])}updateLegendPosition(e){w(this,Se).set(e)}get legendPosition(){let e;return w(this,Se).subscribe(t=>e=t)(),e}buildLegend(e,t,l,i,r,o,s,a,d,u){const h=()=>({colorPalette:e,values:t,minValue:l,maxValue:i,legendType:r,valueFmt:o,chartType:s,legendId:a,value:d,legend:u});w(this,Pe).update(f=>{const m=f.findIndex(g=>g.legendId===a);return m!==-1?f.map((g,_)=>_===m?{...u,...h()}:g):a!==void 0?[...f,h()]:f})}get legendData(){return ut(w(this,Pe))}async initializeData(e,{corordinates:t,value:l,checkInputs:i,min:r,max:o,colorPalette:s,legendType:a,valueFmt:d,chartType:u,legendId:h,legend:f}){await e.fetch(),i(e,t);let m=e.map(b=>b[l]),g=Math.min(...m),_=Math.max(...m),k;return a||(typeof m[0]=="number"?a="scalar":a="categorical"),a&&!s&&(s=a==="categorical"?Kt:["lightblue","darkblue"],s=s.map(b=>rt(b).hex())),k=rt.scale(s).domain([r??g,o??_]),f&&l&&(m=this.handleLegendValues(s,m,a),this.buildLegend(s,m,g,_,a,d,u,h,l,f)),{values:m,colorPalette:s,colorScale:k}}registerPane(e){return w(this,Ee).push(e),e}};I=new WeakMap,q=new WeakMap,x=new WeakMap,de=new WeakMap,$=new WeakMap,H=new WeakMap,ke=new WeakMap,ee=new WeakMap,Ce=new WeakMap,te=new WeakMap,Se=new WeakMap,Pe=new WeakMap,Ee=new WeakMap,B(ye,Ce,new Map);let je=ye;const Tt=Symbol("EvidenceMapContext");function dt(n,e,t){const l=n.slice();return l[7]=e[t],l[9]=t,l}function ht(n){let e,t,l,i,r,o=(n[7]||"No value")+"",s,a,d;return{c(){e=T("div"),t=T("span"),i=M(),r=T("span"),s=he(o),d=M(),this.h()},l(u){e=D(u,"DIV",{class:!0});var h=E(e);t=D(h,"SPAN",{class:!0,style:!0}),E(t).forEach(L),i=W(h),r=D(h,"SPAN",{class:!0,title:!0});var f=E(r);s=ce(f,o),f.forEach(L),d=W(h),h.forEach(L),this.h()},h(){v(t,"class",l="inline-block h-[8px] "+(n[0].chartType==="Area Map"?"":"rounded-full")+" w-[8px]"),ne(t,"background-color",n[0].colorPalette[n[9]]),v(r,"class","inline-block ml-2 truncate max-w-[calc(100%-16px)]"),v(r,"title",a=n[7]),v(e,"class","flex items-center")},m(u,h){V(u,e,h),p(e,t),p(e,i),p(e,r),p(r,s),p(e,d)},p(u,h){h&1&&l!==(l="inline-block h-[8px] "+(u[0].chartType==="Area Map"?"":"rounded-full")+" w-[8px]")&&v(t,"class",l),h&1&&ne(t,"background-color",u[0].colorPalette[u[9]]),h&1&&o!==(o=(u[7]||"No value")+"")&&pe(s,o),h&1&&a!==(a=u[7])&&v(r,"title",a)},d(u){u&&L(e)}}}function rn(n){let e,t,l,i,r,o,s,a,d,u=ie(n[0].values),h=[];for(let f=0;f<u.length;f+=1)h[f]=ht(dt(n,u,f));return{c(){e=T("div"),t=T("div"),l=T("div"),i=T("p"),r=he(n[3]),o=M(),s=T("div");for(let f=0;f<h.length;f+=1)h[f].c();this.h()},l(f){e=D(f,"DIV",{class:!0});var m=E(e);t=D(m,"DIV",{style:!0,class:!0});var g=E(t);l=D(g,"DIV",{class:!0});var _=E(l);i=D(_,"P",{});var k=E(i);r=ce(k,n[3]),k.forEach(L),_.forEach(L),o=W(g),s=D(g,"DIV",{class:!0});var b=E(s);for(let C=0;C<h.length;C+=1)h[C].l(b);b.forEach(L),g.forEach(L),m.forEach(L),this.h()},h(){v(l,"class","flex flex-wrap flex-col font-semibold"),v(s,"class","text-xs pr-1 w-full"),v(t,"style",a=`max-height: ${n[1]?"0px":`${n[2]-50}px`};`),v(t,"class",d="scrollbox flex flex-col transition-[opacity, max-height, overflow-y] duration-[350ms] ease-in-out w-full min-w-24 "+(n[4]?"overflow-y-auto":"overflow-hidden")+" "+(n[1]?"opacity-0":"")+" svelte-nu4nn8"),v(e,"class","flex w-full")},m(f,m){V(f,e,m),p(e,t),p(t,l),p(l,i),p(i,r),p(t,o),p(t,s);for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(s,null)},p(f,[m]){if(m&1){u=ie(f[0].values);let g;for(g=0;g<u.length;g+=1){const _=dt(f,u,g);h[g]?h[g].p(_,m):(h[g]=ht(_),h[g].c(),h[g].m(s,null))}for(;g<h.length;g+=1)h[g].d(1);h.length=u.length}m&6&&a!==(a=`max-height: ${f[1]?"0px":`${f[2]-50}px`};`)&&v(t,"style",a),m&2&&d!==(d="scrollbox flex flex-col transition-[opacity, max-height, overflow-y] duration-[350ms] ease-in-out w-full min-w-24 "+(f[4]?"overflow-y-auto":"overflow-hidden")+" "+(f[1]?"opacity-0":"")+" svelte-nu4nn8")&&v(t,"class",d)},i:Z,o:Z,d(f){f&&L(e),ze(h,f)}}}function un(n,e,t){let{legend:l}=e,{hideLegend:i=!1}=e,{height:r=300}=e,{capitalize:o}=e,s=o(l.value)||"No value",d=l.values.length*16>r-50;return n.$$set=u=>{"legend"in u&&t(0,l=u.legend),"hideLegend"in u&&t(1,i=u.hideLegend),"height"in u&&t(2,r=u.height),"capitalize"in u&&t(5,o=u.capitalize)},[l,i,r,s,d,o]}class fn extends ge{constructor(e){super(),_e(this,e,un,rn,me,{legend:0,hideLegend:1,height:2,capitalize:5})}}function dn(n){let e,t,l,i,r,o,s,a,d,u,h=(n[0].valueFmt?ve(n[0].minValue,n[0].valueFmt):n[0].minValue)+"",f,m,g,_=(n[0].valueFmt?ve(n[0].maxValue,n[0].valueFmt):n[0].maxValue)+"",k,b;return{c(){e=T("div"),t=T("div"),l=T("span"),i=he(n[4]),r=M(),o=T("div"),s=T("span"),a=M(),d=T("div"),u=T("span"),f=he(h),m=M(),g=T("span"),k=he(_),this.h()},l(C){e=D(C,"DIV",{class:!0});var N=E(e);t=D(N,"DIV",{class:!0});var O=E(t);l=D(O,"SPAN",{});var P=E(l);i=ce(P,n[4]),P.forEach(L),O.forEach(L),r=W(N),o=D(N,"DIV",{class:!0});var y=E(o);s=D(y,"SPAN",{style:!0,class:!0});var be=E(s);be.forEach(L),a=W(y),d=D(y,"DIV",{class:!0});var F=E(d);u=D(F,"SPAN",{class:!0});var we=E(u);f=ce(we,h),we.forEach(L),m=W(F),g=D(F,"SPAN",{class:!0});var j=E(g);k=ce(j,_),j.forEach(L),F.forEach(L),y.forEach(L),N.forEach(L),this.h()},h(){v(t,"class","flex flex-wrap flex-col font-semibold"),ne(s,"background",n[0].colorPalette?`linear-gradient(to right, ${n[0].colorPalette.join(", ")})`:"white"),v(s,"class","relative h-2 min-w-56"),v(u,"class","text-[10px] inline-block"),v(g,"class","text-[10px] inline-block"),v(d,"class","flex justify-between"),v(o,"class","flex flex-col justify-center overflow-hidden h-8 w-full"),v(e,"class",b="flex flex-col "+(n[1]?n[2]:n[3])+" transition-[opacity, max-height, overflow-y] duration-[350ms] ease-in-out w-full")},m(C,N){V(C,e,N),p(e,t),p(t,l),p(l,i),p(e,r),p(e,o),p(o,s),p(o,a),p(o,d),p(d,u),p(u,f),p(d,m),p(d,g),p(g,k)},p(C,[N]){N&1&&ne(s,"background",C[0].colorPalette?`linear-gradient(to right, ${C[0].colorPalette.join(", ")})`:"white"),N&1&&h!==(h=(C[0].valueFmt?ve(C[0].minValue,C[0].valueFmt):C[0].minValue)+"")&&pe(f,h),N&1&&_!==(_=(C[0].valueFmt?ve(C[0].maxValue,C[0].valueFmt):C[0].maxValue)+"")&&pe(k,_),N&2&&b!==(b="flex flex-col "+(C[1]?C[2]:C[3])+" transition-[opacity, max-height, overflow-y] duration-[350ms] ease-in-out w-full")&&v(e,"class",b)},i:Z,o:Z,d(C){C&&L(e)}}}function hn(n,e,t){let{legend:l}=e,{hideLegend:i=!1}=e,{capitalize:r}=e,o="max-h-[0px] opacity-0",s="max-h-[300px]",a=r(l.value);return n.$$set=d=>{"legend"in d&&t(0,l=d.legend),"hideLegend"in d&&t(1,i=d.hideLegend),"capitalize"in d&&t(5,r=d.capitalize)},[l,i,o,s,a,r]}class cn extends ge{constructor(e){super(),_e(this,e,hn,dn,me,{legend:0,hideLegend:1,capitalize:5})}}function mn(n){let e,t,l,i,r,o,s=n[0]?"Show Legend":"Hide Legend",a,d,u;return{c(){e=T("button"),t=ot("svg"),l=ot("polyline"),r=M(),o=T("span"),a=he(s),this.h()},l(h){e=D(h,"BUTTON",{class:!0,"aria-label":!0});var f=E(e);t=st(f,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var m=E(t);l=st(m,"polyline",{points:!0}),E(l).forEach(L),m.forEach(L),r=W(f),o=D(f,"SPAN",{class:!0});var g=E(o);a=ce(g,s),g.forEach(L),f.forEach(L),this.h()},h(){v(l,"points","14 17 10 12 14 7"),v(t,"xmlns","http://www.w3.org/2000/svg"),v(t,"width",`8
		`),v(t,"height","8"),v(t,"viewBox","6 6 12 12"),v(t,"fill","none"),v(t,"stroke","#374151"),v(t,"stroke-width","1"),v(t,"stroke-linecap","round"),v(t,"stroke-linejoin","round"),v(t,"class",i="transform transition-transform duration-300 ease-in-out text-left gray-500 "+(n[0]?n[3][n[2]].hide:n[3][n[2]].show)),v(o,"class","sr-only"),v(e,"class","flex z-[1] items-center px-[8px] py-[1.5px]"),v(e,"aria-label","Toggle Legend")},m(h,f){V(h,e,f),p(e,t),p(t,l),p(e,r),p(e,o),p(o,a),d||(u=[Te(e,"click",function(){Ot(n[1])&&n[1].apply(this,arguments)}),Te(e,"dblclick",gn)],d=!0)},p(h,[f]){n=h,f&5&&i!==(i="transform transition-transform duration-300 ease-in-out text-left gray-500 "+(n[0]?n[3][n[2]].hide:n[3][n[2]].show))&&v(t,"class",i),f&1&&s!==(s=n[0]?"Show Legend":"Hide Legend")&&pe(a,s)},i:Z,o:Z,d(h){h&&L(e),d=!1,St(u)}}}const gn=n=>n.stopPropagation();function _n(n,e,t){let{hideLegend:l=!1}=e,{handleLegendToggle:i}=e,{legendPosition:r="bottomLeft"}=e,o="down";r.includes("top")?o="up":r.includes("bottom")&&(o="down");const s={down:{show:"rotate-[270deg]",hide:"rotate-90"},up:{show:"rotate-90",hide:"rotate-[270deg]"}};return n.$$set=a=>{"hideLegend"in a&&t(0,l=a.hideLegend),"handleLegendToggle"in a&&t(1,i=a.handleLegendToggle),"legendPosition"in a&&t(4,r=a.legendPosition)},[l,i,o,s,r]}class bn extends ge{constructor(e){super(),_e(this,e,_n,mn,me,{hideLegend:0,handleLegendToggle:1,legendPosition:4})}}function ct(n,e,t){const l=n.slice();return l[14]=e[t],l}function mt(n,e,t){const l=n.slice();return l[14]=e[t],l}function gt(n){let e,t,l,i,r,o,s,a,d,u,h,f,m=n[4].length>0&&_t(n),g=n[5].length>0&&wt(n);return s=new bn({props:{handleLegendToggle:n[11],hideLegend:n[6],multiLegend:n[7],legendPosition:n[1]}}),{c(){e=T("div"),t=T("div"),m&&m.c(),l=M(),g&&g.c(),r=M(),o=T("div"),le(s.$$.fragment),this.h()},l(_){e=D(_,"DIV",{class:!0,role:!0});var k=E(e);t=D(k,"DIV",{class:!0});var b=E(t);m&&m.l(b),l=W(b),g&&g.l(b),b.forEach(L),r=W(k),o=D(k,"DIV",{class:!0});var C=E(o);oe(s.$$.fragment,C),C.forEach(L),k.forEach(L),this.h()},h(){v(t,"class",i="bg-white background-blur "+n[13][n[1]]+" svelte-168cccw"),v(o,"class",a="bg-white background-blur flex justify-center w-fit transition-[border-radius] ease-in-out "+(n[1].includes("bottom")?"shadow-bottom":"")+" svelte-168cccw"),Y(o,"rounded",n[6]),Y(o,"delay-[225ms]",n[6]),Y(o,"rounded-b",!n[6]&&n[1].includes("bottom")),Y(o,"rounded-t",!n[6]&&!n[1].includes("bottom")),v(e,"class",d="absolute z-[401] m-4 flex max-w-60 flex legend-font "+n[12]()+" "+(n[9][n[1]]??"top-3 left-[-9px]")+" svelte-168cccw"),v(e,"role","group")},m(_,k){V(_,e,k),p(e,t),m&&m.m(t,null),p(t,l),g&&g.m(t,null),p(e,r),p(e,o),se(s,o,null),u=!0,h||(f=[Te(e,"wheel",vn),Te(e,"dblclick",kn)],h=!0)},p(_,k){_[4].length>0?m?(m.p(_,k),k&16&&S(m,1)):(m=_t(_),m.c(),S(m,1),m.m(t,l)):m&&(U(),z(m,1,1,()=>{m=null}),G()),_[5].length>0?g?(g.p(_,k),k&32&&S(g,1)):(g=wt(_),g.c(),S(g,1),g.m(t,null)):g&&(U(),z(g,1,1,()=>{g=null}),G()),(!u||k&2&&i!==(i="bg-white background-blur "+_[13][_[1]]+" svelte-168cccw"))&&v(t,"class",i);const b={};k&64&&(b.hideLegend=_[6]),k&128&&(b.multiLegend=_[7]),k&2&&(b.legendPosition=_[1]),s.$set(b),(!u||k&2&&a!==(a="bg-white background-blur flex justify-center w-fit transition-[border-radius] ease-in-out "+(_[1].includes("bottom")?"shadow-bottom":"")+" svelte-168cccw"))&&v(o,"class",a),(!u||k&66)&&Y(o,"rounded",_[6]),(!u||k&66)&&Y(o,"delay-[225ms]",_[6]),(!u||k&66)&&Y(o,"rounded-b",!_[6]&&_[1].includes("bottom")),(!u||k&66)&&Y(o,"rounded-t",!_[6]&&!_[1].includes("bottom")),(!u||k&2&&d!==(d="absolute z-[401] m-4 flex max-w-60 flex legend-font "+_[12]()+" "+(_[9][_[1]]??"top-3 left-[-9px]")+" svelte-168cccw"))&&v(e,"class",d)},i(_){u||(S(m),S(g),S(s.$$.fragment,_),u=!0)},o(_){z(m),z(g),z(s.$$.fragment,_),u=!1},d(_){_&&L(e),m&&m.d(),g&&g.d(),ae(s),h=!1,St(f)}}}function _t(n){let e,t,l=ie(n[4]),i=[];for(let o=0;o<l.length;o+=1)i[o]=bt(mt(n,l,o));const r=o=>z(i[o],1,1,()=>{i[o]=null});return{c(){e=T("div");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=D(o,"DIV",{class:!0});var s=E(e);for(let a=0;a<i.length;a+=1)i[a].l(s);s.forEach(L),this.h()},h(){v(e,"class","flex flex-wrap hover:cursor-default")},m(o,s){V(o,e,s);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);t=!0},p(o,s){if(s&2260){l=ie(o[4]);let a;for(a=0;a<l.length;a+=1){const d=mt(o,l,a);i[a]?(i[a].p(d,s),S(i[a],1)):(i[a]=bt(d),i[a].c(),S(i[a],1),i[a].m(e,null))}for(U(),a=l.length;a<i.length;a+=1)r(a);G()}},i(o){if(!t){for(let s=0;s<l.length;s+=1)S(i[s]);t=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)z(i[s]);t=!1},d(o){o&&L(e),ze(i,o)}}}function bt(n){let e,t,l,i,r;return t=new fn({props:{height:n[2],legend:n[14],handleLegendToggle:n[11],hideLegend:n[6],multiLegend:n[7],capitalize:Dt}}),{c(){e=T("div"),le(t.$$.fragment),l=M(),this.h()},l(o){e=D(o,"DIV",{class:!0});var s=E(e);oe(t.$$.fragment,s),l=W(s),s.forEach(L),this.h()},h(){v(e,"class",i="border-l first:border-none flex transition-[border, padding] ease-in-out ease-in-out duration-[350ms] px-2 truncate "+(n[7]?"w-1/2":"max-w-48")+" "+(n[6]?" py-0":" py-1"))},m(o,s){V(o,e,s),se(t,e,null),p(e,l),r=!0},p(o,s){const a={};s&4&&(a.height=o[2]),s&16&&(a.legend=o[14]),s&64&&(a.hideLegend=o[6]),s&128&&(a.multiLegend=o[7]),t.$set(a),(!r||s&192&&i!==(i="border-l first:border-none flex transition-[border, padding] ease-in-out ease-in-out duration-[350ms] px-2 truncate "+(o[7]?"w-1/2":"max-w-48")+" "+(o[6]?" py-0":" py-1")))&&v(e,"class",i)},i(o){r||(S(t.$$.fragment,o),r=!0)},o(o){z(t.$$.fragment,o),r=!1},d(o){o&&L(e),ae(t)}}}function wt(n){let e,t,l=ie(n[5]),i=[];for(let o=0;o<l.length;o+=1)i[o]=vt(ct(n,l,o));const r=o=>z(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=R()},l(o){for(let s=0;s<i.length;s+=1)i[s].l(o);e=R()},m(o,s){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(o,s);V(o,e,s),t=!0},p(o,s){if(s&2272){l=ie(o[5]);let a;for(a=0;a<l.length;a+=1){const d=ct(o,l,a);i[a]?(i[a].p(d,s),S(i[a],1)):(i[a]=vt(d),i[a].c(),S(i[a],1),i[a].m(e.parentNode,e))}for(U(),a=l.length;a<i.length;a+=1)r(a);G()}},i(o){if(!t){for(let s=0;s<l.length;s+=1)S(i[s]);t=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)z(i[s]);t=!1},d(o){o&&L(e),ze(i,o)}}}function vt(n){let e,t,l,i,r;return t=new cn({props:{legend:n[14],handleLegendToggle:n[11],hideLegend:n[6],multiLegend:n[7],capitalize:Dt}}),{c(){e=T("div"),le(t.$$.fragment),l=M(),this.h()},l(o){e=D(o,"DIV",{class:!0});var s=E(e);oe(t.$$.fragment,s),l=W(s),s.forEach(L),this.h()},h(){v(e,"class",i="border-t first:border-none overflow-hidden transition-[border, padding] duration-[350ms] ease-in-out px-2 "+(n[6]?"py-0 border-none":"py-1"))},m(o,s){V(o,e,s),se(t,e,null),p(e,l),r=!0},p(o,s){const a={};s&32&&(a.legend=o[14]),s&64&&(a.hideLegend=o[6]),s&128&&(a.multiLegend=o[7]),t.$set(a),(!r||s&64&&i!==(i="border-t first:border-none overflow-hidden transition-[border, padding] duration-[350ms] ease-in-out px-2 "+(o[6]?"py-0 border-none":"py-1")))&&v(e,"class",i)},i(o){r||(S(t.$$.fragment,o),r=!0)},o(o){z(t.$$.fragment,o),r=!1},d(o){o&&L(e),ae(t)}}}function wn(n){let e,t,l=n[8].length>0&&gt(n);return{c(){l&&l.c(),e=R()},l(i){l&&l.l(i),e=R()},m(i,r){l&&l.m(i,r),V(i,e,r),t=!0},p(i,[r]){i[8].length>0?l?(l.p(i,r),r&256&&S(l,1)):(l=gt(i),l.c(),S(l,1),l.m(e.parentNode,e)):l&&(U(),z(l,1,1,()=>{l=null}),G())},i(i){t||(S(l),t=!0)},o(i){z(l),t=!1},d(i){i&&L(e),l&&l.d(i)}}}function Dt(n){return n&&n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()}const vn=n=>n.stopPropagation(),kn=n=>n.stopPropagation();function Ln(n,e,t){let l,i,r=Z,o=()=>(r(),r=Fe(_,P=>t(4,i=P)),_),s,a,d=Z,u=()=>(d(),d=Fe(f,P=>t(8,a=P)),f);n.$$.on_destroy.push(()=>r()),n.$$.on_destroy.push(()=>d());const h={topLeft:"top-[-9px] left-[-9px]",topRight:"top-[-9px] right-[-9px]",bottomLeft:"bottom-[-9px] left-[-9px]",bottomRight:"bottom-[-9px] right-[-9px] "};let{legendData:f}=e;u();let{legendPosition:m="bottomLeft"}=e,{height:g=300}=e,{categoricalLegendData:_=Ae(f,P=>P.filter(y=>y.legendType==="categorical"))}=e;o();let k=Ae(f,P=>P.filter(y=>y.legendType==="scalar"));De(n,k,P=>t(5,s=P));let b=!1;const C=()=>{t(6,b=!b)},N=()=>{let P="";return m.includes("bottom")?P+="flex-col":P+="flex-col-reverse",m.includes("Right")&&(P+=" items-end"),P},O={bottomLeft:"rounded-t rounded-br shadow-bottom-right",bottomRight:"rounded-t rounded-bl shadow-bottom-left",topLeft:"rounded-b rounded-tr z-[405] shadow-bottom",topRight:"rounded-b rounded-tl z-[405] shadow-bottom"};return n.$$set=P=>{"legendData"in P&&u(t(0,f=P.legendData)),"legendPosition"in P&&t(1,m=P.legendPosition),"height"in P&&t(2,g=P.height),"categoricalLegendData"in P&&o(t(3,_=P.categoricalLegendData))},n.$$.update=()=>{n.$$.dirty&48&&t(7,l=i.length>1||s.length>1||s.length>0&&i.length>0)},[f,m,g,_,i,s,b,l,a,h,k,C,N,O]}class yn extends ge{constructor(e){super(),_e(this,e,Ln,wn,me,{legendData:0,legendPosition:1,height:2,categoricalLegendData:3})}}function pn(n){let e,t,l,i,r,o,s=n[1]&&kt(n);const a=n[14].default,d=jt(a,n,n[13],null);let u=n[5]&&Lt(n),h=!n[6]&&yt(n);return{c(){e=T("div"),s&&s.c(),t=M(),l=T("div"),d&&d.c(),i=M(),u&&u.c(),r=M(),h&&h.c(),this.h()},l(f){e=D(f,"DIV",{class:!0});var m=E(e);s&&s.l(m),t=W(m),l=D(m,"DIV",{class:!0,style:!0});var g=E(l);d&&d.l(g),i=W(g),u&&u.l(g),g.forEach(L),r=W(m),h&&h.l(m),m.forEach(L),this.h()},h(){v(l,"class","z-0 rounded-md focus:outline-none svelte-tuhe9b"),ne(l,"height",n[0]+"px"),v(e,"class","relative break-inside-avoid svelte-tuhe9b")},m(f,m){V(f,e,m),s&&s.m(e,null),p(e,t),p(e,l),d&&d.m(l,null),p(l,i),u&&u.m(l,null),n[15](l),p(e,r),h&&h.m(e,null),o=!0},p(f,m){f[1]?s?s.p(f,m):(s=kt(f),s.c(),s.m(e,t)):s&&(s.d(1),s=null),d&&d.p&&(!o||m&8192)&&Jt(d,a,f,f[13],o?qt(a,f[13],m,null):Ht(f[13]),null),f[5]?u?(u.p(f,m),m&32&&S(u,1)):(u=Lt(f),u.c(),S(u,1),u.m(l,null)):u&&(U(),z(u,1,1,()=>{u=null}),G()),(!o||m&1)&&ne(l,"height",f[0]+"px"),f[6]?h&&(U(),z(h,1,1,()=>{h=null}),G()):h?(h.p(f,m),m&64&&S(h,1)):(h=yt(f),h.c(),S(h,1),h.m(e,null))},i(f){o||(S(d,f),S(u),S(h),o=!0)},o(f){z(d,f),z(u),z(h),o=!1},d(f){f&&L(e),s&&s.d(),d&&d.d(f),u&&u.d(),n[15](null),h&&h.d()}}}function Cn(n){let e,t;return e=new Et({props:{error:n[4],chartType:"Map"}}),{c(){le(e.$$.fragment)},l(l){oe(e.$$.fragment,l)},m(l,i){se(e,l,i),t=!0},p(l,i){const r={};i&16&&(r.error=l[4]),e.$set(r)},i(l){t||(S(e.$$.fragment,l),t=!0)},o(l){z(e.$$.fragment,l),t=!1},d(l){ae(e,l)}}}function kt(n){let e,t;return{c(){e=T("h4"),t=he(n[1]),this.h()},l(l){e=D(l,"H4",{class:!0});var i=E(e);t=ce(i,n[1]),i.forEach(L),this.h()},h(){v(e,"class","markdown mb-2")},m(l,i){V(l,e,i),p(e,t)},p(l,i){i&2&&pe(t,l[1])},d(l){l&&L(e)}}}function Lt(n){let e,t;return e=new yn({props:{legendData:n[8],legendPosition:n[2],height:n[0]}}),{c(){le(e.$$.fragment)},l(l){oe(e.$$.fragment,l)},m(l,i){se(e,l,i),t=!0},p(l,i){const r={};i&4&&(r.legendPosition=l[2]),i&1&&(r.height=l[0]),e.$set(r)},i(l){t||(S(e.$$.fragment,l),t=!0)},o(l){z(e.$$.fragment,l),t=!1},d(l){ae(e,l)}}}function yt(n){let e,t,l;return t=new Qt({}),{c(){e=T("div"),le(t.$$.fragment),this.h()},l(i){e=D(i,"DIV",{class:!0,style:!0});var r=E(e);oe(t.$$.fragment,r),r.forEach(L),this.h()},h(){v(e,"class","absolute left-0 right-0 bottom-0 w-full *:m-0 bg-white svelte-tuhe9b"),ne(e,"height",n[0]+"px")},m(i,r){V(i,e,r),se(t,e,null),l=!0},p(i,r){(!l||r&1)&&ne(e,"height",i[0]+"px")},i(i){l||(S(t.$$.fragment,i),l=!0)},o(i){z(t.$$.fragment,i),l=!1},d(i){i&&L(e),ae(t)}}}function Sn(n){let e,t,l,i;const r=[Cn,pn],o=[];function s(a,d){return a[4]?0:1}return e=s(n),t=o[e]=r[e](n),{c(){t.c(),l=R()},l(a){t.l(a),l=R()},m(a,d){o[e].m(a,d),V(a,l,d),i=!0},p(a,[d]){let u=e;e=s(a),e===u?o[e].p(a,d):(U(),z(o[u],1,1,()=>{o[u]=null}),G(),t=o[e],t?t.p(a,d):(t=o[e]=r[e](a),t.c()),S(t,1),t.m(l.parentNode,l))},i(a){i||(S(t),i=!0)},o(a){z(t),i=!1},d(a){a&&L(l),o[e].d(a)}}}const Pn=39.077;function En(n,e,t){let l,i,{$$slots:r={},$$scope:o}=e,s,{startingLat:a=void 0}=e,{startingLong:d=void 0}=e,{startingZoom:u=void 0}=e;const h=-180,f=a||d;let{height:m=300}=e,{basemap:g="https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png"}=e,{title:_=void 0}=e,k;const b=new je;Ft(Tt,b);const C=b.allGeoJsonLoaded;De(n,C,y=>t(6,i=y));let N=b.legendData;De(n,N,y=>t(5,l=y));let{legendPosition:O="bottomLeft"}=e;Pt(async()=>{try{const y=a??!1?[a,d]:[Pn,h];return await b.init(s,g,y,u,f),()=>b.cleanup()}catch(y){t(4,k=y.message),console.error(y)}});function P(y){At[y?"unshift":"push"](()=>{s=y,t(3,s)})}return n.$$set=y=>{"startingLat"in y&&t(9,a=y.startingLat),"startingLong"in y&&t(10,d=y.startingLong),"startingZoom"in y&&t(11,u=y.startingZoom),"height"in y&&t(0,m=y.height),"basemap"in y&&t(12,g=y.basemap),"title"in y&&t(1,_=y.title),"legendPosition"in y&&t(2,O=y.legendPosition),"$$scope"in y&&t(13,o=y.$$scope)},n.$$.update=()=>{n.$$.dirty&4&&O&&b.updateLegendPosition(O)},[m,_,O,s,k,l,i,C,N,a,d,u,g,o,r,P]}class qn extends ge{constructor(e){super(),_e(this,e,En,Sn,me,{startingLat:9,startingLong:10,startingZoom:11,height:0,basemap:12,title:1,legendPosition:2})}}function Tn(n,e,t){let{map:l=void 0}=e,{options:i=void 0}=e,{selectedOptions:r=void 0}=e,{coords:o=void 0}=e,{onclick:s=void 0}=e,{setInput:a=void 0}=e,{unsetInput:d=void 0}=e,{tooltip:u=void 0}=e,{tooltipOptions:h=void 0}=e,{tooltipType:f=void 0}=e,{showTooltip:m=void 0}=e,{item:g=void 0}=e,{link:_=void 0}=e,{name:k=void 0}=e;return Pt(()=>{const b=l.addCircle(g,k,i,r,o,s,a,d,g[_]);if(m){const C=l.buildTooltip(g,u);l.attachTooltip(b,C,h,f)}return()=>b.remove()}),n.$$set=b=>{"map"in b&&t(0,l=b.map),"options"in b&&t(1,i=b.options),"selectedOptions"in b&&t(2,r=b.selectedOptions),"coords"in b&&t(3,o=b.coords),"onclick"in b&&t(4,s=b.onclick),"setInput"in b&&t(5,a=b.setInput),"unsetInput"in b&&t(6,d=b.unsetInput),"tooltip"in b&&t(7,u=b.tooltip),"tooltipOptions"in b&&t(8,h=b.tooltipOptions),"tooltipType"in b&&t(9,f=b.tooltipType),"showTooltip"in b&&t(10,m=b.showTooltip),"item"in b&&t(11,g=b.item),"link"in b&&t(12,_=b.link),"name"in b&&t(13,k=b.name)},[l,i,r,o,s,a,d,u,h,f,m,g,_,k]}class Dn extends ge{constructor(e){super(),_e(this,e,Tn,null,me,{map:0,options:1,selectedOptions:2,coords:3,onclick:4,setInput:5,unsetInput:6,tooltip:7,tooltipOptions:8,tooltipType:9,showTooltip:10,item:11,link:12,name:13})}}function pt(n,e,t){const l=n.slice();return l[53]=e[t],l}function zn(n){let e,t;return e=new Et({props:{error:n[56],chartType:"Point Map"}}),{c(){le(e.$$.fragment)},l(l){oe(e.$$.fragment,l)},m(l,i){se(e,l,i),t=!0},p(l,i){const r={};i[0]&128&&(r.error=l[56]),e.$set(r)},i(l){t||(S(e.$$.fragment,l),t=!0)},o(l){z(e.$$.fragment,l),t=!1},d(l){ae(e,l)}}}function Nn(n){let e,t,l=ie(n[26]),i=[];for(let o=0;o<l.length;o+=1)i[o]=Ct(pt(n,l,o));const r=o=>z(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=R()},l(o){for(let s=0;s<i.length;s+=1)i[s].l(o);e=R()},m(o,s){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(o,s);V(o,e,s),t=!0},p(o,s){if(s[0]&1879048063|s[1]&13){l=ie(o[26]);let a;for(a=0;a<l.length;a+=1){const d=pt(o,l,a);i[a]?(i[a].p(d,s),S(i[a],1)):(i[a]=Ct(d),i[a].c(),S(i[a],1),i[a].m(e.parentNode,e))}for(U(),a=l.length;a<i.length;a+=1)r(a);G()}},i(o){if(!t){for(let s=0;s<l.length;s+=1)S(i[s]);t=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)z(i[s]);t=!1},d(o){o&&L(e),ze(i,o)}}}function Ct(n){let e,t;function l(){return n[45](n[53])}function i(){return n[46](n[53])}function r(){return n[47](n[53])}return e=new Dn({props:{map:n[27],options:{fillColor:n[16]??n[27].handleFillColor(n[53],n[10],n[24],n[2],n[25]),radius:n[11]?n[30](n[53][n[11]]):n[0],fillOpacity:n[3],opacity:n[3],weight:n[1],color:n[15],className:`outline-none ${n[17]}`,markerType:n[23],pane:n[31]},selectedOptions:{fillColor:n[19],fillOpacity:n[5],opacity:n[5],weight:n[4],color:n[18],className:`outline-none ${n[20]}`},coords:[n[53][n[8]],n[53][n[9]]],onclick:l,setInput:i,unsetInput:r,tooltip:n[21],tooltipOptions:n[29],tooltipType:n[22],item:n[53],link:n[12],showTooltip:n[6]}}),{c(){le(e.$$.fragment)},l(o){oe(e.$$.fragment,o)},m(o,s){se(e,o,s),t=!0},p(o,s){n=o;const a={};s[0]&126061583&&(a.options={fillColor:n[16]??n[27].handleFillColor(n[53],n[10],n[24],n[2],n[25]),radius:n[11]?n[30](n[53][n[11]]):n[0],fillOpacity:n[3],opacity:n[3],weight:n[1],color:n[15],className:`outline-none ${n[17]}`,markerType:n[23],pane:n[31]}),s[0]&1835056&&(a.selectedOptions={fillColor:n[19],fillOpacity:n[5],opacity:n[5],weight:n[4],color:n[18],className:`outline-none ${n[20]}`}),s[0]&67109632&&(a.coords=[n[53][n[8]],n[53][n[9]]]),s[0]&67125248&&(a.onclick=l),s[0]&67117056&&(a.setInput=i),s[0]&67117056&&(a.unsetInput=r),s[0]&2097152&&(a.tooltip=n[21]),s[0]&4194304&&(a.tooltipType=n[22]),s[0]&67108864&&(a.item=n[53]),s[0]&4096&&(a.link=n[12]),s[0]&64&&(a.showTooltip=n[6]),e.$set(a)},i(o){t||(S(e.$$.fragment,o),t=!0)},o(o){z(e.$$.fragment,o),t=!1},d(o){ae(e,o)}}}function In(n){return{c:Z,l:Z,m:Z,p:Z,i:Z,o:Z,d:Z}}function Zn(n){let e,t,l,i={ctx:n,current:null,token:null,hasCatch:!0,pending:In,then:Nn,catch:zn,error:56,blocks:[,,,]};return ft(t=Promise.all([n[27].initPromise,n[7].fetch(),n[32]()]),i),{c(){e=R(),i.block.c()},l(r){e=R(),i.block.l(r)},m(r,o){V(r,e,o),i.block.m(r,i.anchor=o),i.mount=()=>e.parentNode,i.anchor=e,l=!0},p(r,o){n=r,i.ctx=n,o[0]&128&&t!==(t=Promise.all([n[27].initPromise,n[7].fetch(),n[32]()]))&&ft(t,i)||tn(i,n,o)},i(r){l||(S(i.block),l=!0)},o(r){for(let o=0;o<3;o+=1){const s=i.blocks[o];z(s)}l=!1},d(r){r&&L(e),i.block.d(r),i.token=null,i=null}}}function Vn(n,e,t){let l,i,r=Z,o=()=>(r(),r=Fe(d,c=>t(26,i=c)),d);n.$$.on_destroy.push(()=>r());const s=Rt(Tt);if(!s)throw new Error("Evidence Map Context has not been set. Points will not function");const a=nn();De(n,a,c=>t(51,l=c));let{data:d}=e;o();let{lat:u=void 0}=e,{long:h=void 0}=e,{value:f=void 0}=e,{valueFmt:m=void 0}=e,{sizeFmt:g=void 0}=e,{size:_=void 0}=e,{legendType:k=void 0}=e,{chartType:b="Point Map"}=e,{legend:C=!0}=e;if(_){if(_=Number(_),isNaN(_))throw Error("size must be a number");if(_<0)throw Error("size cannot be negative")}else _=5;let{sizeCol:N=void 0}=e,{min:O=void 0}=e,{max:P=void 0}=e,{link:y=void 0}=e,{pointName:be=void 0}=e,{name:F=void 0}=e,{onclick:we=()=>{}}=e,{borderWidth:j=void 0}=e;if(j){if(j=Number(j),isNaN(j))throw Error("borderWidth must be a number");if(j<0)throw Error("borderWidth cannot be negative")}else j=.75;let{borderColor:Je="white"}=e,{color:He=void 0}=e,{colorPalette:Le=void 0}=e,{opacity:K=void 0}=e;if(K){if(K=Number(K),isNaN(K))throw Error("opacity must be a number");if(K<0)throw Error("opacity cannot be negative")}else K=1;let{pointClass:qe=void 0}=e,{selectedBorderWidth:Q=void 0}=e;if(Q){if(Q=Number(Q),isNaN(Q))throw Error("selectedBorderWidth must be a number");if(Q<0)throw Error("selectedBorderWidth cannot be negative")}else Q=.75;let{selectedBorderColor:Re="#ab1818"}=e,{selectedColor:Ue="#d42a2a"}=e,{selectedOpacity:X=void 0}=e;if(X){if(X=Number(X),isNaN(X))throw Error("selectedOpacity must be a number");if(X<0)throw Error("selectedOpacity cannot be negative")}else X=1;let{selectedPointClass:Ge=void 0}=e,{showTooltip:Ne=!0}=e,{tooltip:re=[]}=e;re.length===0&&(be&&re.push({id:be,showColumnName:!1,valueClass:"font-bold text-sm"}),f&&re.push({id:f,fmt:m}),N&&N!==f&&re.push({id:N,fmt:g})),re.length===0&&(Ne=!1);let{tooltipClass:Ie=void 0}=e,{tooltipType:Ke="hover"}=e;const zt={permanent:!1,direction:"auto",sticky:!0,opacity:1,className:`${Ie}`,interactive:!0};let{maxSize:Ze=25}=e;function Nt(c){return Math.sqrt(c/Xe*Ye)}let Ve,Be,Qe,Xe,Ye,{pointStyle:xe="points"}=e,$e=s.registerPane(en());async function It(){if(d){let c={corordinates:[u,h],value:f,checkInputs:Yt,min:O,max:P,colorPalette:Le,legendType:k,valueFmt:m,chartType:b,legendId:$e,legend:C};t(24,{values:Ve,colorPalette:Le,colorScale:Be}=await s.initializeData(d,c),Ve,t(2,Le),t(25,Be)),N&&(Qe=Xt(d,N),Xe=Qe[1],Ye=Math.pow(Ze,2)),F&&i.length>0&&et(i[0],F)}}function et(c,ue){at(a,l[ue]=Object.fromEntries(Object.keys(c).map(fe=>[fe,!0])),l)}function tt(c,ue){at(a,l[ue]=Object.fromEntries(Object.entries(c).map(([fe,Me])=>[fe,typeof Me=="string"?Me.replaceAll("'","''"):Me])),l)}function nt(c,ue){a.update(fe=>(Object.prototype.hasOwnProperty.call(fe,ue)&&delete fe[ue],fe)),et(c,ue)}const Zt=c=>{we(c)},Vt=c=>{F&&tt(c,F)},Bt=c=>{F&&nt(c,F)};return n.$$set=c=>{"data"in c&&o(t(7,d=c.data)),"lat"in c&&t(8,u=c.lat),"long"in c&&t(9,h=c.long),"value"in c&&t(10,f=c.value),"valueFmt"in c&&t(35,m=c.valueFmt),"sizeFmt"in c&&t(36,g=c.sizeFmt),"size"in c&&t(0,_=c.size),"legendType"in c&&t(37,k=c.legendType),"chartType"in c&&t(38,b=c.chartType),"legend"in c&&t(39,C=c.legend),"sizeCol"in c&&t(11,N=c.sizeCol),"min"in c&&t(40,O=c.min),"max"in c&&t(41,P=c.max),"link"in c&&t(12,y=c.link),"pointName"in c&&t(42,be=c.pointName),"name"in c&&t(13,F=c.name),"onclick"in c&&t(14,we=c.onclick),"borderWidth"in c&&t(1,j=c.borderWidth),"borderColor"in c&&t(15,Je=c.borderColor),"color"in c&&t(16,He=c.color),"colorPalette"in c&&t(2,Le=c.colorPalette),"opacity"in c&&t(3,K=c.opacity),"pointClass"in c&&t(17,qe=c.pointClass),"selectedBorderWidth"in c&&t(4,Q=c.selectedBorderWidth),"selectedBorderColor"in c&&t(18,Re=c.selectedBorderColor),"selectedColor"in c&&t(19,Ue=c.selectedColor),"selectedOpacity"in c&&t(5,X=c.selectedOpacity),"selectedPointClass"in c&&t(20,Ge=c.selectedPointClass),"showTooltip"in c&&t(6,Ne=c.showTooltip),"tooltip"in c&&t(21,re=c.tooltip),"tooltipClass"in c&&t(43,Ie=c.tooltipClass),"tooltipType"in c&&t(22,Ke=c.tooltipType),"maxSize"in c&&t(44,Ze=c.maxSize),"pointStyle"in c&&t(23,xe=c.pointStyle)},[_,j,Le,K,Q,X,Ne,d,u,h,f,N,y,F,we,Je,He,qe,Re,Ue,Ge,re,Ke,xe,Ve,Be,i,s,a,zt,Nt,$e,It,tt,nt,m,g,k,b,C,O,P,be,Ie,Ze,Zt,Vt,Bt]}class Rn extends ge{constructor(e){super(),_e(this,e,Vn,Zn,me,{data:7,lat:8,long:9,value:10,valueFmt:35,sizeFmt:36,size:0,legendType:37,chartType:38,legend:39,sizeCol:11,min:40,max:41,link:12,pointName:42,name:13,onclick:14,borderWidth:1,borderColor:15,color:16,colorPalette:2,opacity:3,pointClass:17,selectedBorderWidth:4,selectedBorderColor:18,selectedColor:19,selectedOpacity:5,selectedPointClass:20,showTooltip:6,tooltip:21,tooltipClass:43,tooltipType:22,maxSize:44,pointStyle:23},null,[-1,-1])}}export{qn as B,Rn as P};
