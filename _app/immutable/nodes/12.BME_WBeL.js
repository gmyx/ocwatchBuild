import{s as se,a as E,e as P,b as V,c as k,h as ae,d as z,f as g,i as M,j as q,k as A,l as K,m as re,o as ne,p as oe,q as X,n as N}from"../chunks/scheduler.CwZefb0o.js";import{S as ie,i as le,b as Q,d as R,m as G,t as _,a as y,c as Y,e as C,g as B}from"../chunks/index.RfiDZozx.js";import"../chunks/VennDiagram.svelte_svelte_type_style_lang.DO7fS-r7.js";import{w as pe}from"../chunks/entry.BUeAk5M5.js";import{s as ue,Q as w,p as me,r as J,C as ce,t as W}from"../chunks/inferColumnTypes.B7BPdMWL.js";import{h as H}from"../chunks/setTrackProxy.Cyfckp0w.js";import{e as fe,p as _e}from"../chunks/inputs.B-6hjrb4.js";import{D as he,a as de}from"../chunks/Dropdown.C_U7-sr6.js";import{p as ge}from"../chunks/stores.BeSvxQIP.js";import{Q as ee}from"../chunks/QueryViewer.CF_UXxUI.js";import{P as ye}from"../chunks/PointMap.CE7jSVD5.js";function Ie(i){return{c(){this.h()},l(s){this.h()},h(){document.title="Evidence"},m:N,p:N,d:N}}function Z(i){let s,a;return s=new ee({props:{queryID:"shapeIDs",queryResult:i[0]}}),{c(){Q(s.$$.fragment)},l(t){R(s.$$.fragment,t)},m(t,p){G(s,t,p),a=!0},p(t,p){const u={};p&1&&(u.queryResult=t[0]),s.$set(u)},i(t){a||(_(s.$$.fragment,t),a=!0)},o(t){y(s.$$.fragment,t),a=!1},d(t){C(s,t)}}}function x(i){let s,a;return s=new ee({props:{queryID:"shapes",queryResult:i[1]}}),{c(){Q(s.$$.fragment)},l(t){R(s.$$.fragment,t)},m(t,p){G(s,t,p),a=!0},p(t,p){const u={};p&2&&(u.queryResult=t[1]),s.$set(u)},i(t){a||(_(s.$$.fragment,t),a=!0)},o(t){y(s.$$.fragment,t),a=!1},d(t){C(s,t)}}}function De(i){let s,a;return s=new de({props:{valueLabel:"none",value:"-1"}}),{c(){Q(s.$$.fragment)},l(t){R(s.$$.fragment,t)},m(t,p){G(s,t,p),a=!0},p:N,i(t){a||(_(s.$$.fragment,t),a=!0)},o(t){y(s.$$.fragment,t),a=!1},d(t){C(s,t)}}}function be(i){let s,a,t,p,u,l,d,f,c,h,I;function b(e,r){return Ie}let D=b()(i),n=i[0]&&Z(i),o=i[1]&&x(i);return f=new he({props:{data:i[0],title:"Select a shapeID",name:"selected_shapeID",value:"shape_id",$$slots:{default:[De]},$$scope:{ctx:i}}}),h=new ye({props:{data:i[1],lat:"shape_pt_lat",long:"shape_pt_lon","height:":!0,600:!0}}),{c(){s=E(),D.c(),a=P("meta"),t=P("meta"),p=V(),u=E(),n&&n.c(),l=E(),o&&o.c(),d=E(),Q(f.$$.fragment),c=E(),Q(h.$$.fragment),this.h()},l(e){s=k(e);const r=ae("svelte-1j2izld",document.head);D.l(r),a=z(r,"META",{name:!0,content:!0}),t=z(r,"META",{name:!0,content:!0}),p=V(),r.forEach(g),u=k(e),n&&n.l(e),l=k(e),o&&o.l(e),d=k(e),R(f.$$.fragment,e),c=k(e),R(h.$$.fragment,e),this.h()},h(){M(a,"name","twitter:card"),M(a,"content","summary"),M(t,"name","twitter:site"),M(t,"content","@evidence_dev")},m(e,r){q(e,s,r),D.m(document.head,null),A(document.head,a),A(document.head,t),A(document.head,p),q(e,u,r),n&&n.m(e,r),q(e,l,r),o&&o.m(e,r),q(e,d,r),G(f,e,r),q(e,c,r),G(h,e,r),I=!0},p(e,[r]){D.p(e,r),e[0]?n?(n.p(e,r),r&1&&_(n,1)):(n=Z(e),n.c(),_(n,1),n.m(l.parentNode,l)):n&&(B(),y(n,1,1,()=>{n=null}),Y()),e[1]?o?(o.p(e,r),r&2&&_(o,1)):(o=x(e),o.c(),_(o,1),o.m(d.parentNode,d)):o&&(B(),y(o,1,1,()=>{o=null}),Y());const $={};r&1&&($.data=e[0]),r&134217728&&($.$$scope={dirty:r,ctx:e}),f.$set($);const F={};r&2&&(F.data=e[1]),h.$set(F)},i(e){I||(_(n),_(o),_(f.$$.fragment,e),_(h.$$.fragment,e),I=!0)},o(e){y(n),y(o),y(f.$$.fragment,e),y(h.$$.fragment,e),I=!1},d(e){e&&(g(s),g(u),g(l),g(d),g(c)),D.d(e),g(a),g(t),g(p),n&&n.d(e),o&&o.d(e),C(f,e),C(h,e)}}}function $e(i,s,a){let t,p;K(i,ge,m=>a(13,t=m)),K(i,J,m=>a(19,p=m));let{data:u}=s,{data:l={},customFormattingSettings:d,__db:f,inputs:c}=u;re(J,p="d08c134805e8ecb7f4558c4b241cf652",p);let h=fe(pe(c));ne(h.subscribe(m=>a(4,c=m))),oe(ce,{getCustomFormats:()=>d.customFormats||[]});const I=(m,te)=>_e(f.query,m,{query_name:te});ue(I);let b;const L=()=>{b||(b=setTimeout(()=>{W.add({id:"LoadingToast",title:"",message:"Loading...",status:"info"},0)},3e3))},D=()=>{b?(clearTimeout(b),b=null):W.dismiss("LoadingToast")};X(()=>(w.addEventListener("inFlightQueryStart",L),w.addEventListener("inFlightQueryEnd",D),w.QueriesLoading&&L(),()=>{w.removeEventListener("inFlightQueryStart",L),w.removeEventListener("inFlightQueryEnd",D)})),t.params,X(()=>!0);let n={initialData:void 0,initialError:void 0},o=H`select distinct shape_id from GTFS.shapes`,e="select distinct shape_id from GTFS.shapes";l.shapeIDs_data&&(l.shapeIDs_data instanceof Error?n.initialError=l.shapeIDs_data:n.initialData=l.shapeIDs_data,l.shapeIDs_columns&&(n.knownColumns=l.shapeIDs_columns));let r,$=!1;const F=w.createReactive({callback:m=>{a(0,r=m)},execFn:I},{id:"shapeIDs",...n});F(e,{noResolve:o,...n}),globalThis[Symbol.for("shapeIDs")]={get value(){return r}};let v={initialData:void 0,initialError:void 0},T=H`select * from GTFS.shapes where shape_id = '${c.selected_shapeID.value}'`,S=`select * from GTFS.shapes where shape_id = '${c.selected_shapeID.value}'`;l.shapes_data&&(l.shapes_data instanceof Error?v.initialError=l.shapes_data:v.initialData=l.shapes_data,l.shapes_columns&&(v.knownColumns=l.shapes_columns));let O,U=!1;const j=w.createReactive({callback:m=>{a(1,O=m)},execFn:I},{id:"shapes",...v});return j(S,{noResolve:T,...v}),globalThis[Symbol.for("shapes")]={get value(){return O}},i.$$set=m=>{"data"in m&&a(2,u=m.data)},i.$$.update=()=>{i.$$.dirty&4&&a(3,{data:l={},customFormattingSettings:d,__db:f}=u,l),i.$$.dirty&8&&me.set(Object.keys(l).length>0),i.$$.dirty&8192&&t.params,i.$$.dirty&480&&(o||!$?o||(F(e,{noResolve:o,...n}),a(8,$=!0)):F(e,{noResolve:o})),i.$$.dirty&16&&a(10,T=H`select * from GTFS.shapes where shape_id = '${c.selected_shapeID.value}'`),i.$$.dirty&16&&a(11,S=`select * from GTFS.shapes where shape_id = '${c.selected_shapeID.value}'`),i.$$.dirty&7680&&(T||!U?T||(j(S,{noResolve:T,...v}),a(12,U=!0)):j(S,{noResolve:T}))},a(6,o=H`select distinct shape_id from GTFS.shapes`),a(7,e="select distinct shape_id from GTFS.shapes"),[r,O,u,l,c,n,o,e,$,v,T,S,U,t]}class Ce extends ie{constructor(s){super(),le(this,s,$e,be,se,{data:2})}}export{Ce as component};
