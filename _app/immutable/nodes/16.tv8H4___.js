import{s as Le,b as Ee,j as N,f as d,e as te,J as Se,d as se,t as ke,K as Fe,U as Me,k as M,L as qe,n as ne,g as Ae,i as W,C as De,D as Ue,r as lt,x as nt,y as _t,z as pt,a as A,c as Q,h as ut,l as He,m as ft,o as mt,p as dt,q as Pe}from"../chunks/scheduler.CwZefb0o.js";import{S as Qe,i as Je,g as fe,a as f,c as me,t as p,b as R,d as E,m as q,e as I}from"../chunks/index.RfiDZozx.js";import{n as ct,p as ht,q as yt,r as Tt,V as St,t as je,Q as Ft,g as gt,b as wt,E as vt,D as Gt,m as Ve}from"../chunks/VennDiagram.svelte_svelte_type_style_lang.D5SiE8nu.js";import{w as bt}from"../chunks/entry.CLsv0ICV.js";import{Q as P,s as $t,p as kt,r as Be,C as Nt,t as We}from"../chunks/inferColumnTypes.CZSR8CUR.js";import{h as H}from"../chunks/setTrackProxy.Cyfckp0w.js";import{e as Rt,p as Et}from"../chunks/inputs.uqKFdAxO.js";import{D as ze,a as at}from"../chunks/Dropdown.sBO35P-m.js";import{p as qt}from"../chunks/stores.DybgH1qU.js";import{Q as Ge}from"../chunks/QueryViewer.DbhmcTXQ.js";import{B as It,P as Ke}from"../chunks/Points.C1t6_sbZ.js";function Ct(o){let t,s;return t=new St({props:{error:o[2]}}),{c(){R(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,i){q(t,e,i),s=!0},p(e,i){const r={};i&4&&(r.error=e[2]),t.$set(r)},i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function Ot(o){let t,s=je(o[1],o[3])+"",e;return{c(){t=te("span"),e=Se(s),this.h()},l(i){t=se(i,"SPAN",{style:!0});var r=ke(t);e=Fe(r,s),r.forEach(d),this.h()},h(){Me(t,"color",o[4])},m(i,r){N(i,t,r),M(t,e)},p(i,r){r&10&&s!==(s=je(i[1],i[3])+"")&&qe(e,s),r&16&&Me(t,"color",i[4])},i:ne,o:ne,d(i){i&&d(t)}}}function Dt(o){let t,s,e,i,r,l="Placeholder: no data currently referenced.";return{c(){t=te("span"),s=Se("["),e=Se(o[0]),i=Se("]"),r=te("span"),r.textContent=l,this.h()},l(m){t=se(m,"SPAN",{class:!0});var u=ke(t);s=Fe(u,"["),e=Fe(u,o[0]),i=Fe(u,"]"),r=se(u,"SPAN",{class:!0,"data-svelte-h":!0}),Ae(r)!=="svelte-ddarzq"&&(r.textContent=l),u.forEach(d),this.h()},h(){W(r,"class","error-msg svelte-11norvs"),W(t,"class","placeholder svelte-11norvs")},m(m,u){N(m,t,u),M(t,s),M(t,e),M(t,i),M(t,r)},p(m,u){u&1&&qe(e,m[0])},i:ne,o:ne,d(m){m&&d(t)}}}function Lt(o){let t,s,e,i;const r=[Dt,Ot,Ct],l=[];function m(u,_){return u[0]?0:u[2]?2:1}return t=m(o),s=l[t]=r[t](o),{c(){s.c(),e=Ee()},l(u){s.l(u),e=Ee()},m(u,_){l[t].m(u,_),N(u,e,_),i=!0},p(u,[_]){let D=t;t=m(u),t===D?l[t].p(u,_):(fe(),f(l[D],1,1,()=>{l[D]=null}),me(),s=l[t],s?s.p(u,_):(s=l[t]=r[t](u),s.c()),p(s,1),s.m(e.parentNode,e))},i(u){i||(p(s),i=!0)},o(u){f(s),i=!1},d(u){u&&d(e),l[t].d(u)}}}function At(o,t,s){let{data:e=null}=t,{row:i=0}=t,{column:r=null}=t,{value:l=null}=t,{placeholder:m=null}=t,{fmt:u=void 0}=t,_,D,g,{color:O=void 0}=t,h="",{redNegatives:L=!1}=t,J;return o.$$set=c=>{"data"in c&&s(5,e=c.data),"row"in c&&s(8,i=c.row),"column"in c&&s(6,r=c.column),"value"in c&&s(9,l=c.value),"placeholder"in c&&s(0,m=c.placeholder),"fmt"in c&&s(10,u=c.fmt),"color"in c&&s(11,O=c.color),"redNegatives"in c&&s(7,L=c.redNegatives)},o.$$.update=()=>{var c;if(o.$$.dirty&576&&s(6,r=r??l),o.$$.dirty&5477)try{if(s(2,g=void 0),!m)if(e){if(typeof e=="string")throw Error(`Received: data=${e}, expected: data={${e}}`);if(Array.isArray(e)||s(5,e=[e]),isNaN(i))throw Error("row must be a number (row="+i+")");try{Object.keys(e[i])[0]}catch{throw Error("Row "+i+" does not exist in the dataset")}s(6,r=r??Object.keys(e[i])[0]),ct(e,[r]),s(12,J=ht(e,"array"));const C=J.filter(w=>{var _e;return w.type==="date"&&!(((_e=e[0])==null?void 0:_e[w.id])instanceof Date)}).map(w=>w.id);for(let w=0;w<C.length;w++)s(5,e=yt(e,C[w]));s(1,D=e[i][r]),s(12,J=J.filter(w=>w.id===r)),u?s(3,_=Tt(u,(c=J[0].format)==null?void 0:c.valueType)):s(3,_=J[0].format)}else throw Error("No data provided. If you referenced a query result, check that the name is correct.")}catch(C){s(2,g=C.message),console.error("\x1B[31m%s\x1B[0m",`Error in Value: ${g}`)}o.$$.dirty&576&&l&&r&&console.warn('Both "value" and "column" were supplied as props to Value. "value" will be ignored.'),o.$$.dirty&128&&s(7,L=L==="true"||L===!0),o.$$.dirty&2178&&(L||O)&&(L&&D<0?s(4,h="rgb(220 38 38)"):O&&s(4,h=O))},[m,D,g,_,h,e,r,L,i,l,u,O,J]}class Qt extends Qe{constructor(t){super(),Je(this,t,At,Lt,Le,{data:5,row:8,column:6,value:9,placeholder:0,fmt:10,color:11,redNegatives:7})}}function Jt(o){let t;const s=o[7].default,e=lt(s,o,o[8],null);return{c(){e&&e.c()},l(i){e&&e.l(i)},m(i,r){e&&e.m(i,r),t=!0},p(i,r){e&&e.p&&(!t||r&256)&&nt(e,s,i,i[8],t?pt(s,i[8],r,null):_t(i[8]),null)},i(i){t||(p(e,i),t=!0)},o(i){f(e,i),t=!1},d(i){e&&e.d(i)}}}function Mt(o){let t,s;const e=[o[4],{data:P.isQuery(o[11])?Array.from(o[11]):o[11]}];let i={$$slots:{default:[Jt]},$$scope:{ctx:o}};for(let r=0;r<e.length;r+=1)i=De(i,e[r]);return t=new Qt({props:i}),{c(){R(t.$$.fragment)},l(r){E(t.$$.fragment,r)},m(r,l){q(t,r,l),s=!0},p(r,l){const m=l&2064?gt(e,[l&16&&wt(r[4]),l&2048&&{data:P.isQuery(r[11])?Array.from(r[11]):r[11]}]):{};l&256&&(m.$$scope={dirty:l,ctx:r}),t.$set(m)},i(r){s||(p(t.$$.fragment,r),s=!0)},o(r){f(t.$$.fragment,r),s=!1},d(r){I(t,r)}}}function Xe(o){let t,s;return t=new vt({props:{emptyMessage:o[2],emptySet:o[1],chartType:jt,isInitial:o[3]}}),{c(){R(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,i){q(t,e,i),s=!0},p(e,i){const r={};i&4&&(r.emptyMessage=e[2]),i&2&&(r.emptySet=e[1]),i&8&&(r.isInitial=e[3]),t.$set(r)},i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function Ut(o){let t,s,e=!o[4].placeholder&&Xe(o);return{c(){t=te("span"),e&&e.c(),this.h()},l(i){t=se(i,"SPAN",{slot:!0});var r=ke(t);e&&e.l(r),r.forEach(d),this.h()},h(){W(t,"slot","empty")},m(i,r){N(i,t,r),e&&e.m(t,null),s=!0},p(i,r){i[4].placeholder?e&&(fe(),f(e,1,1,()=>{e=null}),me()):e?(e.p(i,r),r&16&&p(e,1)):(e=Xe(i),e.c(),p(e,1),e.m(t,null))},i(i){s||(p(e),s=!0)},o(i){f(e),s=!1},d(i){i&&d(t),e&&e.d()}}}function Ht(o){let t,s="Loading...";return{c(){t=te("span"),t.textContent=s,this.h()},l(e){t=se(e,"SPAN",{slot:!0,class:!0,"data-svelte-h":!0}),Ae(t)!=="svelte-exu0be"&&(t.textContent=s),this.h()},h(){W(t,"slot","skeleton"),W(t,"class","text-gray-500")},m(e,i){N(e,t,i)},p:ne,d(e){e&&d(t)}}}function Pt(o){let t,s;return t=new Ft({props:{data:o[0],$$slots:{skeleton:[Ht],empty:[Ut],default:[Mt,({loaded:e})=>({11:e}),({loaded:e})=>e?2048:0]},$$scope:{ctx:o}}}),{c(){R(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,i){q(t,e,i),s=!0},p(e,[i]){const r={};i&1&&(r.data=e[0]),i&2334&&(r.$$scope={dirty:i,ctx:e}),t.$set(r)},i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}let jt="Value";function Vt(o,t,s){let e,{$$slots:i={},$$scope:r}=t,{data:l}=t,{column:m}=t,{agg:u}=t;const _=P.isQuery(l)?l.hash:void 0;let D=(l==null?void 0:l.hash)===_,{emptySet:g=void 0}=t,{emptyMessage:O=void 0}=t;return o.$$set=h=>{s(10,t=De(De({},t),Ue(h))),"data"in h&&s(0,l=h.data),"column"in h&&s(5,m=h.column),"agg"in h&&s(6,u=h.agg),"emptySet"in h&&s(1,g=h.emptySet),"emptyMessage"in h&&s(2,O=h.emptyMessage),"$$scope"in h&&s(8,r=h.$$scope)},o.$$.update=()=>{o.$$.dirty&97&&u&&s(0,l=l.groupBy(void 0).agg({[u]:{col:m,as:m}})),o.$$.dirty&1&&s(3,D=(l==null?void 0:l.hash)===_),s(4,e=Object.fromEntries(Object.entries(t).filter(([,h])=>h!==void 0)))},t=Ue(t),[l,g,O,D,e,m,u,i,r]}class Bt extends Qe{constructor(t){super(),Je(this,t,Vt,Pt,Le,{data:0,column:5,agg:6,emptySet:1,emptyMessage:2})}}function Wt(o){return{c(){this.h()},l(t){this.h()},h(){document.title="Evidence"},m:ne,p:ne,d:ne}}function Ye(o){let t,s;return t=new Ge({props:{queryID:"uniondata",queryResult:o[1]}}),{c(){R(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,i){q(t,e,i),s=!0},p(e,i){const r={};i[0]&2&&(r.queryResult=e[1]),t.$set(r)},i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function Ze(o){let t,s;return t=new Ge({props:{queryID:"stops",queryResult:o[2]}}),{c(){R(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,i){q(t,e,i),s=!0},p(e,i){const r={};i[0]&4&&(r.queryResult=e[2]),t.$set(r)},i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function xe(o){let t,s;return t=new Ge({props:{queryID:"stop_times_stops",queryResult:o[3]}}),{c(){R(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,i){q(t,e,i),s=!0},p(e,i){const r={};i[0]&8&&(r.queryResult=e[3]),t.$set(r)},i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function et(o){let t,s;return t=new Ge({props:{queryID:"stop_times",queryResult:o[4]}}),{c(){R(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,i){q(t,e,i),s=!0},p(e,i){const r={};i[0]&16&&(r.queryResult=e[4]),t.$set(r)},i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function tt(o){let t,s;return t=new Ge({props:{queryID:"shapes",queryResult:o[5]}}),{c(){R(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,i){q(t,e,i),s=!0},p(e,i){const r={};i[0]&32&&(r.queryResult=e[5]),t.$set(r)},i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function st(o){let t,s;return t=new Ge({props:{queryID:"trips_shapeid",queryResult:o[6]}}),{c(){R(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,i){q(t,e,i),s=!0},p(e,i){const r={};i[0]&64&&(r.queryResult=e[6]),t.$set(r)},i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function rt(o){let t,s;return t=new Ge({props:{queryID:"trips_tripid",queryResult:o[7]}}),{c(){R(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,i){q(t,e,i),s=!0},p(e,i){const r={};i[0]&128&&(r.queryResult=e[7]),t.$set(r)},i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function it(o){let t,s;return t=new Ge({props:{queryID:"routes",queryResult:o[8]}}),{c(){R(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,i){q(t,e,i),s=!0},p(e,i){const r={};i[0]&256&&(r.queryResult=e[8]),t.$set(r)},i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function zt(o){let t,s;return t=new at({props:{valueLabel:"None",value:""}}),{c(){R(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,i){q(t,e,i),s=!0},p:ne,i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function Kt(o){let t,s;return t=new at({props:{valueLabel:"None",value:""}}),{c(){R(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,i){q(t,e,i),s=!0},p:ne,i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function Xt(o){let t,s,e,i;return t=new Ve({props:{id:"stop_name"}}),e=new Ve({props:{id:"arrival_time"}}),{c(){R(t.$$.fragment),s=A(),R(e.$$.fragment)},l(r){E(t.$$.fragment,r),s=Q(r),E(e.$$.fragment,r)},m(r,l){q(t,r,l),N(r,s,l),q(e,r,l),i=!0},p:ne,i(r){i||(p(t.$$.fragment,r),p(e.$$.fragment,r),i=!0)},o(r){f(t.$$.fragment,r),f(e.$$.fragment,r),i=!1},d(r){r&&d(s),I(t,r),I(e,r)}}}function Yt(o){let t,s,e,i;return t=new Ke({props:{data:o[5],lat:"shape_pt_lat",long:"shape_pt_lon",color:"blue"}}),e=new Ke({props:{data:o[2],lat:"stop_lat",long:"stop_lon",pointName:"stop_id",color:"red",tooltip:[{id:"stop_name",showColumnName:!1,valueClass:"text-xl font-semibold"},{id:"stop_id",fmt:"0000",showColumnName:!0}]}}),{c(){R(t.$$.fragment),s=A(),R(e.$$.fragment)},l(r){E(t.$$.fragment,r),s=Q(r),E(e.$$.fragment,r)},m(r,l){q(t,r,l),N(r,s,l),q(e,r,l),i=!0},p(r,l){const m={};l[0]&32&&(m.data=r[5]),t.$set(m);const u={};l[0]&4&&(u.data=r[2]),e.$set(u)},i(r){i||(p(t.$$.fragment,r),p(e.$$.fragment,r),i=!0)},o(r){f(t.$$.fragment,r),f(e.$$.fragment,r),i=!1},d(r){r&&d(s),I(t,r),I(e,r)}}}function Zt(o){let t,s,e,i,r,l,m,u,_,D,g,O,h,L,J="Test data:",c,C,w,_e,de=o[0].selected_route.value+"",K,re,z,be,ce=o[0].selected_trip.value+"",ge,ie,j,he,X,we,Y,Z,U,pe,x,ve,ee,B;function ye(a,n){return Wt}let Te=ye()(o),v=o[1]&&Ye(o),G=o[2]&&Ze(o),y=o[3]&&xe(o),T=o[4]&&et(o),S=o[5]&&tt(o),b=o[6]&&st(o),$=o[7]&&rt(o),k=o[8]&&it(o);return X=new Bt({props:{data:o[6],column:"shape_id"}}),Y=new ze({props:{data:o[8],title:"Select a route",name:"selected_route",value:"route_id",label:"displayName",$$slots:{default:[zt]},$$scope:{ctx:o}}}),U=new ze({props:{data:o[7],title:"Select a Trip",name:"selected_trip",value:"trip_id",$$slots:{default:[Kt]},$$scope:{ctx:o}}}),x=new Gt({props:{data:o[2],$$slots:{default:[Xt]},$$scope:{ctx:o}}}),ee=new It({props:{height:"600",$$slots:{default:[Yt]},$$scope:{ctx:o}}}),{c(){t=A(),Te.c(),s=te("meta"),e=te("meta"),i=Ee(),r=A(),v&&v.c(),l=A(),G&&G.c(),m=A(),y&&y.c(),u=A(),T&&T.c(),_=A(),S&&S.c(),D=A(),b&&b.c(),g=A(),$&&$.c(),O=A(),k&&k.c(),h=A(),L=te("p"),L.textContent=J,c=A(),C=te("ul"),w=te("li"),_e=Se("Route: "),K=Se(de),re=A(),z=te("li"),be=Se("Trip: "),ge=Se(ce),ie=A(),j=te("li"),he=Se("Shape: "),R(X.$$.fragment),we=A(),R(Y.$$.fragment),Z=A(),R(U.$$.fragment),pe=A(),R(x.$$.fragment),ve=A(),R(ee.$$.fragment),this.h()},l(a){t=Q(a);const n=ut("svelte-1j2izld",document.head);Te.l(n),s=se(n,"META",{name:!0,content:!0}),e=se(n,"META",{name:!0,content:!0}),i=Ee(),n.forEach(d),r=Q(a),v&&v.l(a),l=Q(a),G&&G.l(a),m=Q(a),y&&y.l(a),u=Q(a),T&&T.l(a),_=Q(a),S&&S.l(a),D=Q(a),b&&b.l(a),g=Q(a),$&&$.l(a),O=Q(a),k&&k.l(a),h=Q(a),L=se(a,"P",{class:!0,"data-svelte-h":!0}),Ae(L)!=="svelte-xtwibm"&&(L.textContent=J),c=Q(a),C=se(a,"UL",{class:!0});var V=ke(C);w=se(V,"LI",{class:!0});var ae=ke(w);_e=Fe(ae,"Route: "),K=Fe(ae,de),ae.forEach(d),re=Q(V),z=se(V,"LI",{class:!0});var oe=ke(z);be=Fe(oe,"Trip: "),ge=Fe(oe,ce),oe.forEach(d),ie=Q(V),j=se(V,"LI",{class:!0});var le=ke(j);he=Fe(le,"Shape: "),E(X.$$.fragment,le),le.forEach(d),V.forEach(d),we=Q(a),E(Y.$$.fragment,a),Z=Q(a),E(U.$$.fragment,a),pe=Q(a),E(x.$$.fragment,a),ve=Q(a),E(ee.$$.fragment,a),this.h()},h(){W(s,"name","twitter:card"),W(s,"content","summary"),W(e,"name","twitter:site"),W(e,"content","@evidence_dev"),W(L,"class","markdown"),W(w,"class","markdown"),W(z,"class","markdown"),W(j,"class","markdown"),W(C,"class","markdown")},m(a,n){N(a,t,n),Te.m(document.head,null),M(document.head,s),M(document.head,e),M(document.head,i),N(a,r,n),v&&v.m(a,n),N(a,l,n),G&&G.m(a,n),N(a,m,n),y&&y.m(a,n),N(a,u,n),T&&T.m(a,n),N(a,_,n),S&&S.m(a,n),N(a,D,n),b&&b.m(a,n),N(a,g,n),$&&$.m(a,n),N(a,O,n),k&&k.m(a,n),N(a,h,n),N(a,L,n),N(a,c,n),N(a,C,n),M(C,w),M(w,_e),M(w,K),M(C,re),M(C,z),M(z,be),M(z,ge),M(C,ie),M(C,j),M(j,he),q(X,j,null),N(a,we,n),q(Y,a,n),N(a,Z,n),q(U,a,n),N(a,pe,n),q(x,a,n),N(a,ve,n),q(ee,a,n),B=!0},p(a,n){Te.p(a,n),a[1]?v?(v.p(a,n),n[0]&2&&p(v,1)):(v=Ye(a),v.c(),p(v,1),v.m(l.parentNode,l)):v&&(fe(),f(v,1,1,()=>{v=null}),me()),a[2]?G?(G.p(a,n),n[0]&4&&p(G,1)):(G=Ze(a),G.c(),p(G,1),G.m(m.parentNode,m)):G&&(fe(),f(G,1,1,()=>{G=null}),me()),a[3]?y?(y.p(a,n),n[0]&8&&p(y,1)):(y=xe(a),y.c(),p(y,1),y.m(u.parentNode,u)):y&&(fe(),f(y,1,1,()=>{y=null}),me()),a[4]?T?(T.p(a,n),n[0]&16&&p(T,1)):(T=et(a),T.c(),p(T,1),T.m(_.parentNode,_)):T&&(fe(),f(T,1,1,()=>{T=null}),me()),a[5]?S?(S.p(a,n),n[0]&32&&p(S,1)):(S=tt(a),S.c(),p(S,1),S.m(D.parentNode,D)):S&&(fe(),f(S,1,1,()=>{S=null}),me()),a[6]?b?(b.p(a,n),n[0]&64&&p(b,1)):(b=st(a),b.c(),p(b,1),b.m(g.parentNode,g)):b&&(fe(),f(b,1,1,()=>{b=null}),me()),a[7]?$?($.p(a,n),n[0]&128&&p($,1)):($=rt(a),$.c(),p($,1),$.m(O.parentNode,O)):$&&(fe(),f($,1,1,()=>{$=null}),me()),a[8]?k?(k.p(a,n),n[0]&256&&p(k,1)):(k=it(a),k.c(),p(k,1),k.m(h.parentNode,h)):k&&(fe(),f(k,1,1,()=>{k=null}),me()),(!B||n[0]&1)&&de!==(de=a[0].selected_route.value+"")&&qe(K,de),(!B||n[0]&1)&&ce!==(ce=a[0].selected_trip.value+"")&&qe(ge,ce);const V={};n[0]&64&&(V.data=a[6]),X.$set(V);const ae={};n[0]&256&&(ae.data=a[8]),n[2]&2&&(ae.$$scope={dirty:n,ctx:a}),Y.$set(ae);const oe={};n[0]&128&&(oe.data=a[7]),n[2]&2&&(oe.$$scope={dirty:n,ctx:a}),U.$set(oe);const le={};n[0]&4&&(le.data=a[2]),n[2]&2&&(le.$$scope={dirty:n,ctx:a}),x.$set(le);const ue={};n[0]&36|n[2]&2&&(ue.$$scope={dirty:n,ctx:a}),ee.$set(ue)},i(a){B||(p(v),p(G),p(y),p(T),p(S),p(b),p($),p(k),p(X.$$.fragment,a),p(Y.$$.fragment,a),p(U.$$.fragment,a),p(x.$$.fragment,a),p(ee.$$.fragment,a),B=!0)},o(a){f(v),f(G),f(y),f(T),f(S),f(b),f($),f(k),f(X.$$.fragment,a),f(Y.$$.fragment,a),f(U.$$.fragment,a),f(x.$$.fragment,a),f(ee.$$.fragment,a),B=!1},d(a){a&&(d(t),d(r),d(l),d(m),d(u),d(_),d(D),d(g),d(O),d(h),d(L),d(c),d(C),d(we),d(Z),d(pe),d(ve)),Te.d(a),d(s),d(e),d(i),v&&v.d(a),G&&G.d(a),y&&y.d(a),T&&T.d(a),S&&S.d(a),b&&b.d(a),$&&$.d(a),k&&k.d(a),I(X),I(Y,a),I(U,a),I(x,a),I(ee,a)}}}function xt(o,t,s){let e,i;He(o,qt,F=>s(43,e=F)),He(o,Be,F=>s(49,i=F));let{data:r}=t,{data:l={},customFormattingSettings:m,__db:u,inputs:_}=r;ft(Be,i="2b6c1db65c289f379997e7e319f8d0a4",i);let D=Rt(bt(_));mt(D.subscribe(F=>s(0,_=F))),dt(Nt,{getCustomFormats:()=>m.customFormats||[]});const g=(F,ot)=>Et(u.query,F,{query_name:ot});$t(g);let O;const h=()=>{O||(O=setTimeout(()=>{We.add({id:"LoadingToast",title:"",message:"Loading...",status:"info"},0)},3e3))},L=()=>{O?(clearTimeout(O),O=null):We.dismiss("LoadingToast")};Pe(()=>(P.addEventListener("inFlightQueryStart",h),P.addEventListener("inFlightQueryEnd",L),P.QueriesLoading&&h(),()=>{P.removeEventListener("inFlightQueryStart",h),P.removeEventListener("inFlightQueryEnd",L)})),e.params,Pe(()=>!0);let J={initialData:void 0,initialError:void 0},c=H`select shape_pt_sequence as id, shape_pt_lat as lat, shape_pt_lon as lon, 2 as color, '' as stop_name, '' as arrival_time from GTFS.shapes where shape_id in (select shape_id from GTFS.trips where trip_id like '${_.selected_trip.value}')
union
select GTFS.stops.stop_id as id, stop_lat as lat, stop_lon as lon, 1 as color, stop_name, arrival_time
from GTFS.stops JOIN GTFS.stop_times ON (GTFS.stop_times.stop_id = GTFS.stops.stop_id and GTFS.stop_times.trip_id = '${_.selected_trip.value}')
where GTFS.stops.stop_id in (select stop_id from GTFS.stop_times where trip_id = '${_.selected_trip.value}')`,C=`select shape_pt_sequence as id, shape_pt_lat as lat, shape_pt_lon as lon, 2 as color, '' as stop_name, '' as arrival_time from GTFS.shapes where shape_id in (select shape_id from GTFS.trips where trip_id like '${_.selected_trip.value}')
union
select GTFS.stops.stop_id as id, stop_lat as lat, stop_lon as lon, 1 as color, stop_name, arrival_time
from GTFS.stops JOIN GTFS.stop_times ON (GTFS.stop_times.stop_id = GTFS.stops.stop_id and GTFS.stop_times.trip_id = '${_.selected_trip.value}')
where GTFS.stops.stop_id in (select stop_id from GTFS.stop_times where trip_id = '${_.selected_trip.value}')`;l.uniondata_data&&(l.uniondata_data instanceof Error?J.initialError=l.uniondata_data:J.initialData=l.uniondata_data,l.uniondata_columns&&(J.knownColumns=l.uniondata_columns));let w,_e=!1;const de=P.createReactive({callback:F=>{s(1,w=F)},execFn:g},{id:"uniondata",...J});de(C,{noResolve:c,...J}),globalThis[Symbol.for("uniondata")]={get value(){return w}};let K={initialData:void 0,initialError:void 0},re=H`select GTFS.stops.stop_id as id, stop_lat, stop_lon, 1 as color, stop_name, arrival_time
from GTFS.stops JOIN GTFS.stop_times ON (GTFS.stop_times.stop_id = GTFS.stops.stop_id and GTFS.stop_times.trip_id = '${_.selected_trip.value}')`,z=`select GTFS.stops.stop_id as id, stop_lat, stop_lon, 1 as color, stop_name, arrival_time
from GTFS.stops JOIN GTFS.stop_times ON (GTFS.stop_times.stop_id = GTFS.stops.stop_id and GTFS.stop_times.trip_id = '${_.selected_trip.value}')`;l.stops_data&&(l.stops_data instanceof Error?K.initialError=l.stops_data:K.initialData=l.stops_data,l.stops_columns&&(K.knownColumns=l.stops_columns));let be,ce=!1;const ge=P.createReactive({callback:F=>{s(2,be=F)},execFn:g},{id:"stops",...K});ge(z,{noResolve:re,...K}),globalThis[Symbol.for("stops")]={get value(){return be}};let ie={initialData:void 0,initialError:void 0},j=H`select stop_id from GTFS.stop_times where trip_id = '${_.selected_trip.value}'`,he=`select stop_id from GTFS.stop_times where trip_id = '${_.selected_trip.value}'`;l.stop_times_stops_data&&(l.stop_times_stops_data instanceof Error?ie.initialError=l.stop_times_stops_data:ie.initialData=l.stop_times_stops_data,l.stop_times_stops_columns&&(ie.knownColumns=l.stop_times_stops_columns));let X,we=!1;const Y=P.createReactive({callback:F=>{s(3,X=F)},execFn:g},{id:"stop_times_stops",...ie});Y(he,{noResolve:j,...ie}),globalThis[Symbol.for("stop_times_stops")]={get value(){return X}};let Z={initialData:void 0,initialError:void 0},U=H`select * from GTFS.stop_times where trip_id = '${_.selected_trip.value}'`,pe=`select * from GTFS.stop_times where trip_id = '${_.selected_trip.value}'`;l.stop_times_data&&(l.stop_times_data instanceof Error?Z.initialError=l.stop_times_data:Z.initialData=l.stop_times_data,l.stop_times_columns&&(Z.knownColumns=l.stop_times_columns));let x,ve=!1;const ee=P.createReactive({callback:F=>{s(4,x=F)},execFn:g},{id:"stop_times",...Z});ee(pe,{noResolve:U,...Z}),globalThis[Symbol.for("stop_times")]={get value(){return x}};let B={initialData:void 0,initialError:void 0},ye=H`select * from GTFS.shapes where shape_id in (select shape_id from GTFS.trips where trip_id like '${_.selected_trip.value}')`,Ne=`select * from GTFS.shapes where shape_id in (select shape_id from GTFS.trips where trip_id like '${_.selected_trip.value}')`;l.shapes_data&&(l.shapes_data instanceof Error?B.initialError=l.shapes_data:B.initialData=l.shapes_data,l.shapes_columns&&(B.knownColumns=l.shapes_columns));let Te,v=!1;const G=P.createReactive({callback:F=>{s(5,Te=F)},execFn:g},{id:"shapes",...B});G(Ne,{noResolve:ye,...B}),globalThis[Symbol.for("shapes")]={get value(){return Te}};let y={initialData:void 0,initialError:void 0},T=H`select shape_id from GTFS.trips where trip_id like '${_.selected_trip.value}'`,S=`select shape_id from GTFS.trips where trip_id like '${_.selected_trip.value}'`;l.trips_shapeid_data&&(l.trips_shapeid_data instanceof Error?y.initialError=l.trips_shapeid_data:y.initialData=l.trips_shapeid_data,l.trips_shapeid_columns&&(y.knownColumns=l.trips_shapeid_columns));let b,$=!1;const k=P.createReactive({callback:F=>{s(6,b=F)},execFn:g},{id:"trips_shapeid",...y});k(S,{noResolve:T,...y}),globalThis[Symbol.for("trips_shapeid")]={get value(){return b}};let a={initialData:void 0,initialError:void 0},n=H`select 
    GTFS.trips.trip_id, trip_headsign || ' - ' ||
    case 
    when monday = true then 'Monday'
    when tuesday = true then 'Tuesday'
    when wednesday = true then 'Wednesday'
    when thursday = true then 'Thursday'
    when friday = true then 'Friday'
    when saturday = true then 'Saturday'
    when sunday = true then 'Sunday'
    end || ' @ ' || arrival_time as displayName
from (GTFS.trips NATURAL JOIN GTFS.calendar) INNER JOIN GTFS.stop_times on GTFS.trips.trip_id = GTFS.stop_times.trip_id and GTFS.stop_times.stop_sequence = 1
where route_id = '${_.selected_route.value}'`,V=`select 
    GTFS.trips.trip_id, trip_headsign || ' - ' ||
    case 
    when monday = true then 'Monday'
    when tuesday = true then 'Tuesday'
    when wednesday = true then 'Wednesday'
    when thursday = true then 'Thursday'
    when friday = true then 'Friday'
    when saturday = true then 'Saturday'
    when sunday = true then 'Sunday'
    end || ' @ ' || arrival_time as displayName
from (GTFS.trips NATURAL JOIN GTFS.calendar) INNER JOIN GTFS.stop_times on GTFS.trips.trip_id = GTFS.stop_times.trip_id and GTFS.stop_times.stop_sequence = 1
where route_id = '${_.selected_route.value}'`;l.trips_tripid_data&&(l.trips_tripid_data instanceof Error?a.initialError=l.trips_tripid_data:a.initialData=l.trips_tripid_data,l.trips_tripid_columns&&(a.knownColumns=l.trips_tripid_columns));let ae,oe=!1;const le=P.createReactive({callback:F=>{s(7,ae=F)},execFn:g},{id:"trips_tripid",...a});le(V,{noResolve:n,...a}),globalThis[Symbol.for("trips_tripid")]={get value(){return ae}};let ue={initialData:void 0,initialError:void 0},$e=H`select *, route_id || ' ' || route_long_name as displayName from GTFS.routes`,Re="select *, route_id || ' ' || route_long_name as displayName from GTFS.routes";l.routes_data&&(l.routes_data instanceof Error?ue.initialError=l.routes_data:ue.initialData=l.routes_data,l.routes_columns&&(ue.knownColumns=l.routes_columns));let Ie,Ce=!1;const Oe=P.createReactive({callback:F=>{s(8,Ie=F)},execFn:g},{id:"routes",...ue});return Oe(Re,{noResolve:$e,...ue}),globalThis[Symbol.for("routes")]={get value(){return Ie}},o.$$set=F=>{"data"in F&&s(9,r=F.data)},o.$$.update=()=>{o.$$.dirty[0]&512&&s(10,{data:l={},customFormattingSettings:m,__db:u}=r,l),o.$$.dirty[0]&1024&&kt.set(Object.keys(l).length>0),o.$$.dirty[1]&4096&&e.params,o.$$.dirty[0]&1&&s(12,c=H`select shape_pt_sequence as id, shape_pt_lat as lat, shape_pt_lon as lon, 2 as color, '' as stop_name, '' as arrival_time from GTFS.shapes where shape_id in (select shape_id from GTFS.trips where trip_id like '${_.selected_trip.value}')
union
select GTFS.stops.stop_id as id, stop_lat as lat, stop_lon as lon, 1 as color, stop_name, arrival_time
from GTFS.stops JOIN GTFS.stop_times ON (GTFS.stop_times.stop_id = GTFS.stops.stop_id and GTFS.stop_times.trip_id = '${_.selected_trip.value}')
where GTFS.stops.stop_id in (select stop_id from GTFS.stop_times where trip_id = '${_.selected_trip.value}')`),o.$$.dirty[0]&1&&s(13,C=`select shape_pt_sequence as id, shape_pt_lat as lat, shape_pt_lon as lon, 2 as color, '' as stop_name, '' as arrival_time from GTFS.shapes where shape_id in (select shape_id from GTFS.trips where trip_id like '${_.selected_trip.value}')
union
select GTFS.stops.stop_id as id, stop_lat as lat, stop_lon as lon, 1 as color, stop_name, arrival_time
from GTFS.stops JOIN GTFS.stop_times ON (GTFS.stop_times.stop_id = GTFS.stops.stop_id and GTFS.stop_times.trip_id = '${_.selected_trip.value}')
where GTFS.stops.stop_id in (select stop_id from GTFS.stop_times where trip_id = '${_.selected_trip.value}')`),o.$$.dirty[0]&30720&&(c||!_e?c||(de(C,{noResolve:c,...J}),s(14,_e=!0)):de(C,{noResolve:c})),o.$$.dirty[0]&1&&s(16,re=H`select GTFS.stops.stop_id as id, stop_lat, stop_lon, 1 as color, stop_name, arrival_time
from GTFS.stops JOIN GTFS.stop_times ON (GTFS.stop_times.stop_id = GTFS.stops.stop_id and GTFS.stop_times.trip_id = '${_.selected_trip.value}')`),o.$$.dirty[0]&1&&s(17,z=`select GTFS.stops.stop_id as id, stop_lat, stop_lon, 1 as color, stop_name, arrival_time
from GTFS.stops JOIN GTFS.stop_times ON (GTFS.stop_times.stop_id = GTFS.stops.stop_id and GTFS.stop_times.trip_id = '${_.selected_trip.value}')`),o.$$.dirty[0]&491520&&(re||!ce?re||(ge(z,{noResolve:re,...K}),s(18,ce=!0)):ge(z,{noResolve:re})),o.$$.dirty[0]&1&&s(20,j=H`select stop_id from GTFS.stop_times where trip_id = '${_.selected_trip.value}'`),o.$$.dirty[0]&1&&s(21,he=`select stop_id from GTFS.stop_times where trip_id = '${_.selected_trip.value}'`),o.$$.dirty[0]&7864320&&(j||!we?j||(Y(he,{noResolve:j,...ie}),s(22,we=!0)):Y(he,{noResolve:j})),o.$$.dirty[0]&1&&s(24,U=H`select * from GTFS.stop_times where trip_id = '${_.selected_trip.value}'`),o.$$.dirty[0]&1&&s(25,pe=`select * from GTFS.stop_times where trip_id = '${_.selected_trip.value}'`),o.$$.dirty[0]&125829120&&(U||!ve?U||(ee(pe,{noResolve:U,...Z}),s(26,ve=!0)):ee(pe,{noResolve:U})),o.$$.dirty[0]&1&&s(28,ye=H`select * from GTFS.shapes where shape_id in (select shape_id from GTFS.trips where trip_id like '${_.selected_trip.value}')`),o.$$.dirty[0]&1&&s(29,Ne=`select * from GTFS.shapes where shape_id in (select shape_id from GTFS.trips where trip_id like '${_.selected_trip.value}')`),o.$$.dirty[0]&2013265920&&(ye||!v?ye||(G(Ne,{noResolve:ye,...B}),s(30,v=!0)):G(Ne,{noResolve:ye})),o.$$.dirty[0]&1&&s(32,T=H`select shape_id from GTFS.trips where trip_id like '${_.selected_trip.value}'`),o.$$.dirty[0]&1&&s(33,S=`select shape_id from GTFS.trips where trip_id like '${_.selected_trip.value}'`),o.$$.dirty[1]&15&&(T||!$?T||(k(S,{noResolve:T,...y}),s(34,$=!0)):k(S,{noResolve:T})),o.$$.dirty[0]&1&&s(36,n=H`select 
    GTFS.trips.trip_id, trip_headsign || ' - ' ||
    case 
    when monday = true then 'Monday'
    when tuesday = true then 'Tuesday'
    when wednesday = true then 'Wednesday'
    when thursday = true then 'Thursday'
    when friday = true then 'Friday'
    when saturday = true then 'Saturday'
    when sunday = true then 'Sunday'
    end || ' @ ' || arrival_time as displayName
from (GTFS.trips NATURAL JOIN GTFS.calendar) INNER JOIN GTFS.stop_times on GTFS.trips.trip_id = GTFS.stop_times.trip_id and GTFS.stop_times.stop_sequence = 1
where route_id = '${_.selected_route.value}'`),o.$$.dirty[0]&1&&s(37,V=`select 
    GTFS.trips.trip_id, trip_headsign || ' - ' ||
    case 
    when monday = true then 'Monday'
    when tuesday = true then 'Tuesday'
    when wednesday = true then 'Wednesday'
    when thursday = true then 'Thursday'
    when friday = true then 'Friday'
    when saturday = true then 'Saturday'
    when sunday = true then 'Sunday'
    end || ' @ ' || arrival_time as displayName
from (GTFS.trips NATURAL JOIN GTFS.calendar) INNER JOIN GTFS.stop_times on GTFS.trips.trip_id = GTFS.stop_times.trip_id and GTFS.stop_times.stop_sequence = 1
where route_id = '${_.selected_route.value}'`),o.$$.dirty[1]&240&&(n||!oe?n||(le(V,{noResolve:n,...a}),s(38,oe=!0)):le(V,{noResolve:n})),o.$$.dirty[1]&3840&&($e||!Ce?$e||(Oe(Re,{noResolve:$e,...ue}),s(42,Ce=!0)):Oe(Re,{noResolve:$e}))},s(40,$e=H`select *, route_id || ' ' || route_long_name as displayName from GTFS.routes`),s(41,Re="select *, route_id || ' ' || route_long_name as displayName from GTFS.routes"),[_,w,be,X,x,Te,b,ae,Ie,r,l,J,c,C,_e,K,re,z,ce,ie,j,he,we,Z,U,pe,ve,B,ye,Ne,v,y,T,S,$,a,n,V,oe,ue,$e,Re,Ce,e]}class us extends Qe{constructor(t){super(),Je(this,t,xt,Zt,Le,{data:9},null,[-1,-1,-1])}}export{us as component};
