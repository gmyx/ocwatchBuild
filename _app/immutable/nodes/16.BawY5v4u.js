import{s as Ae,b as Ce,j as w,f as m,e as K,J as ye,d as X,t as Ge,K as ge,U as Ue,k as L,L as De,n as pe,g as Le,i as J,C as Oe,D as He,r as nt,x as ut,y as _t,z as pt,a as O,c as A,h as ft,l as Je,m as mt,o as dt,p as ct,q as Pe}from"../chunks/scheduler.CwZefb0o.js";import{S as Qe,i as Me,g as ce,a as f,c as he,t as u,b as R,d as q,m as E,e as I}from"../chunks/index.RfiDZozx.js";import{n as ht,p as yt,q as gt,r as Tt,V as St,t as je,Q as wt,g as vt,b as Ft,E as bt,D as Gt,m as Ve}from"../chunks/VennDiagram.svelte_svelte_type_style_lang.DO7fS-r7.js";import{w as $t}from"../chunks/entry.BUeAk5M5.js";import{Q as B,s as kt,p as Nt,r as Be,C as Rt,t as We}from"../chunks/inferColumnTypes.B7BPdMWL.js";import{h as V}from"../chunks/setTrackProxy.Cyfckp0w.js";import{e as qt,p as Et}from"../chunks/inputs.B-6hjrb4.js";import{D as ze,a as lt}from"../chunks/Dropdown.C_U7-sr6.js";import{p as It}from"../chunks/stores.BeSvxQIP.js";import{Q as Ee}from"../chunks/QueryViewer.CF_UXxUI.js";import{B as Ct,P as Ke}from"../chunks/Points.0Tuc1RiC.js";function Dt(l){let t,s;return t=new St({props:{error:l[2]}}),{c(){R(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){E(t,e,a),s=!0},p(e,a){const r={};a&4&&(r.error=e[2]),t.$set(r)},i(e){s||(u(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function Ot(l){let t,s=je(l[1],l[3])+"",e;return{c(){t=K("span"),e=ye(s),this.h()},l(a){t=X(a,"SPAN",{style:!0});var r=Ge(t);e=ge(r,s),r.forEach(m),this.h()},h(){Ue(t,"color",l[4])},m(a,r){w(a,t,r),L(t,e)},p(a,r){r&10&&s!==(s=je(a[1],a[3])+"")&&De(e,s),r&16&&Ue(t,"color",a[4])},i:pe,o:pe,d(a){a&&m(t)}}}function At(l){let t,s,e,a,r,o="Placeholder: no data currently referenced.";return{c(){t=K("span"),s=ye("["),e=ye(l[0]),a=ye("]"),r=K("span"),r.textContent=o,this.h()},l(d){t=X(d,"SPAN",{class:!0});var p=Ge(t);s=ge(p,"["),e=ge(p,l[0]),a=ge(p,"]"),r=X(p,"SPAN",{class:!0,"data-svelte-h":!0}),Le(r)!=="svelte-ddarzq"&&(r.textContent=o),p.forEach(m),this.h()},h(){J(r,"class","error-msg svelte-11norvs"),J(t,"class","placeholder svelte-11norvs")},m(d,p){w(d,t,p),L(t,s),L(t,e),L(t,a),L(t,r)},p(d,p){p&1&&De(e,d[0])},i:pe,o:pe,d(d){d&&m(t)}}}function Lt(l){let t,s,e,a;const r=[At,Ot,Dt],o=[];function d(p,_){return p[0]?0:p[2]?2:1}return t=d(l),s=o[t]=r[t](l),{c(){s.c(),e=Ce()},l(p){s.l(p),e=Ce()},m(p,_){o[t].m(p,_),w(p,e,_),a=!0},p(p,[_]){let Q=t;t=d(p),t===Q?o[t].p(p,_):(ce(),f(o[Q],1,1,()=>{o[Q]=null}),he(),s=o[t],s?s.p(p,_):(s=o[t]=r[t](p),s.c()),u(s,1),s.m(e.parentNode,e))},i(p){a||(u(s),a=!0)},o(p){f(s),a=!1},d(p){p&&m(e),o[t].d(p)}}}function Qt(l,t,s){let{data:e=null}=t,{row:a=0}=t,{column:r=null}=t,{value:o=null}=t,{placeholder:d=null}=t,{fmt:p=void 0}=t,_,Q,v,{color:D=void 0}=t,y="",{redNegatives:M=!1}=t,U;return l.$$set=h=>{"data"in h&&s(5,e=h.data),"row"in h&&s(8,a=h.row),"column"in h&&s(6,r=h.column),"value"in h&&s(9,o=h.value),"placeholder"in h&&s(0,d=h.placeholder),"fmt"in h&&s(10,p=h.fmt),"color"in h&&s(11,D=h.color),"redNegatives"in h&&s(7,M=h.redNegatives)},l.$$.update=()=>{var h;if(l.$$.dirty&576&&s(6,r=r??o),l.$$.dirty&5477)try{if(s(2,v=void 0),!d)if(e){if(typeof e=="string")throw Error(`Received: data=${e}, expected: data={${e}}`);if(Array.isArray(e)||s(5,e=[e]),isNaN(a))throw Error("row must be a number (row="+a+")");try{Object.keys(e[a])[0]}catch{throw Error("Row "+a+" does not exist in the dataset")}s(6,r=r??Object.keys(e[a])[0]),ht(e,[r]),s(12,U=yt(e,"array"));const C=U.filter(F=>{var fe;return F.type==="date"&&!(((fe=e[0])==null?void 0:fe[F.id])instanceof Date)}).map(F=>F.id);for(let F=0;F<C.length;F++)s(5,e=gt(e,C[F]));s(1,Q=e[a][r]),s(12,U=U.filter(F=>F.id===r)),p?s(3,_=Tt(p,(h=U[0].format)==null?void 0:h.valueType)):s(3,_=U[0].format)}else throw Error("No data provided. If you referenced a query result, check that the name is correct.")}catch(C){s(2,v=C.message),console.error("\x1B[31m%s\x1B[0m",`Error in Value: ${v}`)}l.$$.dirty&576&&o&&r&&console.warn('Both "value" and "column" were supplied as props to Value. "value" will be ignored.'),l.$$.dirty&128&&s(7,M=M==="true"||M===!0),l.$$.dirty&2178&&(M||D)&&(M&&Q<0?s(4,y="rgb(220 38 38)"):D&&s(4,y=D))},[d,Q,v,_,y,e,r,M,a,o,p,D,U]}class Mt extends Qe{constructor(t){super(),Me(this,t,Qt,Lt,Ae,{data:5,row:8,column:6,value:9,placeholder:0,fmt:10,color:11,redNegatives:7})}}function Ut(l){let t;const s=l[7].default,e=nt(s,l,l[8],null);return{c(){e&&e.c()},l(a){e&&e.l(a)},m(a,r){e&&e.m(a,r),t=!0},p(a,r){e&&e.p&&(!t||r&256)&&ut(e,s,a,a[8],t?pt(s,a[8],r,null):_t(a[8]),null)},i(a){t||(u(e,a),t=!0)},o(a){f(e,a),t=!1},d(a){e&&e.d(a)}}}function Ht(l){let t,s;const e=[l[4],{data:B.isQuery(l[11])?Array.from(l[11]):l[11]}];let a={$$slots:{default:[Ut]},$$scope:{ctx:l}};for(let r=0;r<e.length;r+=1)a=Oe(a,e[r]);return t=new Mt({props:a}),{c(){R(t.$$.fragment)},l(r){q(t.$$.fragment,r)},m(r,o){E(t,r,o),s=!0},p(r,o){const d=o&2064?vt(e,[o&16&&Ft(r[4]),o&2048&&{data:B.isQuery(r[11])?Array.from(r[11]):r[11]}]):{};o&256&&(d.$$scope={dirty:o,ctx:r}),t.$set(d)},i(r){s||(u(t.$$.fragment,r),s=!0)},o(r){f(t.$$.fragment,r),s=!1},d(r){I(t,r)}}}function Xe(l){let t,s;return t=new bt({props:{emptyMessage:l[2],emptySet:l[1],chartType:Vt,isInitial:l[3]}}),{c(){R(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){E(t,e,a),s=!0},p(e,a){const r={};a&4&&(r.emptyMessage=e[2]),a&2&&(r.emptySet=e[1]),a&8&&(r.isInitial=e[3]),t.$set(r)},i(e){s||(u(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function Jt(l){let t,s,e=!l[4].placeholder&&Xe(l);return{c(){t=K("span"),e&&e.c(),this.h()},l(a){t=X(a,"SPAN",{slot:!0});var r=Ge(t);e&&e.l(r),r.forEach(m),this.h()},h(){J(t,"slot","empty")},m(a,r){w(a,t,r),e&&e.m(t,null),s=!0},p(a,r){a[4].placeholder?e&&(ce(),f(e,1,1,()=>{e=null}),he()):e?(e.p(a,r),r&16&&u(e,1)):(e=Xe(a),e.c(),u(e,1),e.m(t,null))},i(a){s||(u(e),s=!0)},o(a){f(e),s=!1},d(a){a&&m(t),e&&e.d()}}}function Pt(l){let t,s="Loading...";return{c(){t=K("span"),t.textContent=s,this.h()},l(e){t=X(e,"SPAN",{slot:!0,class:!0,"data-svelte-h":!0}),Le(t)!=="svelte-exu0be"&&(t.textContent=s),this.h()},h(){J(t,"slot","skeleton"),J(t,"class","text-gray-500")},m(e,a){w(e,t,a)},p:pe,d(e){e&&m(t)}}}function jt(l){let t,s;return t=new wt({props:{data:l[0],$$slots:{skeleton:[Pt],empty:[Jt],default:[Ht,({loaded:e})=>({11:e}),({loaded:e})=>e?2048:0]},$$scope:{ctx:l}}}),{c(){R(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){E(t,e,a),s=!0},p(e,[a]){const r={};a&1&&(r.data=e[0]),a&2334&&(r.$$scope={dirty:a,ctx:e}),t.$set(r)},i(e){s||(u(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}let Vt="Value";function Bt(l,t,s){let e,{$$slots:a={},$$scope:r}=t,{data:o}=t,{column:d}=t,{agg:p}=t;const _=B.isQuery(o)?o.hash:void 0;let Q=(o==null?void 0:o.hash)===_,{emptySet:v=void 0}=t,{emptyMessage:D=void 0}=t;return l.$$set=y=>{s(10,t=Oe(Oe({},t),He(y))),"data"in y&&s(0,o=y.data),"column"in y&&s(5,d=y.column),"agg"in y&&s(6,p=y.agg),"emptySet"in y&&s(1,v=y.emptySet),"emptyMessage"in y&&s(2,D=y.emptyMessage),"$$scope"in y&&s(8,r=y.$$scope)},l.$$.update=()=>{l.$$.dirty&97&&p&&s(0,o=o.groupBy(void 0).agg({[p]:{col:d,as:d}})),l.$$.dirty&1&&s(3,Q=(o==null?void 0:o.hash)===_),s(4,e=Object.fromEntries(Object.entries(t).filter(([,y])=>y!==void 0)))},t=He(t),[o,v,D,Q,e,d,p,a,r]}class Ye extends Qe{constructor(t){super(),Me(this,t,Bt,jt,Ae,{data:0,column:5,agg:6,emptySet:1,emptyMessage:2})}}function Wt(l){return{c(){this.h()},l(t){this.h()},h(){document.title="Evidence"},m:pe,p:pe,d:pe}}function Ze(l){let t,s;return t=new Ee({props:{queryID:"stops",queryResult:l[1]}}),{c(){R(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){E(t,e,a),s=!0},p(e,a){const r={};a[0]&2&&(r.queryResult=e[1]),t.$set(r)},i(e){s||(u(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function xe(l){let t,s;return t=new Ee({props:{queryID:"stop_times_stops",queryResult:l[2]}}),{c(){R(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){E(t,e,a),s=!0},p(e,a){const r={};a[0]&4&&(r.queryResult=e[2]),t.$set(r)},i(e){s||(u(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function et(l){let t,s;return t=new Ee({props:{queryID:"stop_times",queryResult:l[3]}}),{c(){R(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){E(t,e,a),s=!0},p(e,a){const r={};a[0]&8&&(r.queryResult=e[3]),t.$set(r)},i(e){s||(u(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function tt(l){let t,s;return t=new Ee({props:{queryID:"shapes",queryResult:l[4]}}),{c(){R(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){E(t,e,a),s=!0},p(e,a){const r={};a[0]&16&&(r.queryResult=e[4]),t.$set(r)},i(e){s||(u(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function st(l){let t,s;return t=new Ee({props:{queryID:"trips_shapeid",queryResult:l[5]}}),{c(){R(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){E(t,e,a),s=!0},p(e,a){const r={};a[0]&32&&(r.queryResult=e[5]),t.$set(r)},i(e){s||(u(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function rt(l){let t,s;return t=new Ee({props:{queryID:"trips_tripid",queryResult:l[6]}}),{c(){R(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){E(t,e,a),s=!0},p(e,a){const r={};a[0]&64&&(r.queryResult=e[6]),t.$set(r)},i(e){s||(u(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function it(l){let t,s;return t=new Ee({props:{queryID:"routes",queryResult:l[7]}}),{c(){R(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){E(t,e,a),s=!0},p(e,a){const r={};a[0]&128&&(r.queryResult=e[7]),t.$set(r)},i(e){s||(u(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function at(l){let t,s;return t=new Ee({props:{queryID:"select_trip_details",queryResult:l[8]}}),{c(){R(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){E(t,e,a),s=!0},p(e,a){const r={};a[0]&256&&(r.queryResult=e[8]),t.$set(r)},i(e){s||(u(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function zt(l){let t,s;return t=new lt({props:{valueLabel:"None",value:""}}),{c(){R(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){E(t,e,a),s=!0},p:pe,i(e){s||(u(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function Kt(l){let t,s;return t=new lt({props:{valueLabel:"None",value:""}}),{c(){R(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){E(t,e,a),s=!0},p:pe,i(e){s||(u(t.$$.fragment,e),s=!0)},o(e){f(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function Xt(l){let t,s,e,a;return t=new Ve({props:{id:"stop_name"}}),e=new Ve({props:{id:"arrival_time"}}),{c(){R(t.$$.fragment),s=O(),R(e.$$.fragment)},l(r){q(t.$$.fragment,r),s=A(r),q(e.$$.fragment,r)},m(r,o){E(t,r,o),w(r,s,o),E(e,r,o),a=!0},p:pe,i(r){a||(u(t.$$.fragment,r),u(e.$$.fragment,r),a=!0)},o(r){f(t.$$.fragment,r),f(e.$$.fragment,r),a=!1},d(r){r&&m(s),I(t,r),I(e,r)}}}function Yt(l){let t,s,e,a;return t=new Ke({props:{data:l[4],lat:"shape_pt_lat",long:"shape_pt_lon",color:"blue"}}),e=new Ke({props:{data:l[1],lat:"stop_lat",long:"stop_lon",pointName:"stop_id",color:"red",tooltip:[{id:"stop_name",showColumnName:!1,valueClass:"text-xl font-semibold"},{id:"arrival_time",fmt:"arrival_time",showColumnName:!1,valueClass:"text-xl font-semibold"},{id:"stop_id",fmt:"0000",showColumnName:!0}]}}),{c(){R(t.$$.fragment),s=O(),R(e.$$.fragment)},l(r){q(t.$$.fragment,r),s=A(r),q(e.$$.fragment,r)},m(r,o){E(t,r,o),w(r,s,o),E(e,r,o),a=!0},p(r,o){const d={};o[0]&16&&(d.data=r[4]),t.$set(d);const p={};o[0]&2&&(p.data=r[1]),e.$set(p)},i(r){a||(u(t.$$.fragment,r),u(e.$$.fragment,r),a=!0)},o(r){f(t.$$.fragment,r),f(e.$$.fragment,r),a=!1},d(r){r&&m(s),I(t,r),I(e,r)}}}function Zt(l){let t,s,e,a,r,o,d,p,_,Q,v,D,y,M,U="Test data:",h,C,F,fe,Te=l[0].selected_route.value+"",x,le,Y,Ie,Se=l[0].selected_trip.value+"",$e,oe,W,we,ee,ke,te,se,P,me,re,Ne,ie,z,j,ve,Re,ae,de;function Fe(i,n){return Wt}let ne=Fe()(l),b=l[1]&&Ze(l),G=l[2]&&xe(l),$=l[3]&&et(l),g=l[4]&&tt(l),T=l[5]&&st(l),S=l[6]&&rt(l),k=l[7]&&it(l),N=l[8]&&at(l);return ee=new Ye({props:{data:l[5],column:"shape_id"}}),te=new ze({props:{data:l[7],title:"Select a route",name:"selected_route",value:"route_id",label:"displayName",$$slots:{default:[zt]},$$scope:{ctx:l}}}),P=new ze({props:{data:l[6],title:"Select a Trip",name:"selected_trip",value:"trip_id",$$slots:{default:[Kt]},$$scope:{ctx:l}}}),re=new Gt({props:{data:l[1],$$slots:{default:[Xt]},$$scope:{ctx:l}}}),j=new Ye({props:{data:l[8],column:"displayName"}}),ae=new Ct({props:{height:"600",title:"Route Map",$$slots:{default:[Yt]},$$scope:{ctx:l}}}),{c(){t=O(),ne.c(),s=K("meta"),e=K("meta"),a=Ce(),r=O(),b&&b.c(),o=O(),G&&G.c(),d=O(),$&&$.c(),p=O(),g&&g.c(),_=O(),T&&T.c(),Q=O(),S&&S.c(),v=O(),k&&k.c(),D=O(),N&&N.c(),y=O(),M=K("p"),M.textContent=U,h=O(),C=K("ul"),F=K("li"),fe=ye("Route: "),x=ye(Te),le=O(),Y=K("li"),Ie=ye("Trip: "),$e=ye(Se),oe=O(),W=K("li"),we=ye("Shape: "),R(ee.$$.fragment),ke=O(),R(te.$$.fragment),se=O(),R(P.$$.fragment),me=O(),R(re.$$.fragment),Ne=O(),ie=K("h2"),z=K("a"),R(j.$$.fragment),ve=ye(" details:"),Re=O(),R(ae.$$.fragment),this.h()},l(i){t=A(i);const n=ft("svelte-1j2izld",document.head);ne.l(n),s=X(n,"META",{name:!0,content:!0}),e=X(n,"META",{name:!0,content:!0}),a=Ce(),n.forEach(m),r=A(i),b&&b.l(i),o=A(i),G&&G.l(i),d=A(i),$&&$.l(i),p=A(i),g&&g.l(i),_=A(i),T&&T.l(i),Q=A(i),S&&S.l(i),v=A(i),k&&k.l(i),D=A(i),N&&N.l(i),y=A(i),M=X(i,"P",{class:!0,"data-svelte-h":!0}),Le(M)!=="svelte-xtwibm"&&(M.textContent=U),h=A(i),C=X(i,"UL",{class:!0});var H=Ge(C);F=X(H,"LI",{class:!0});var Z=Ge(F);fe=ge(Z,"Route: "),x=ge(Z,Te),Z.forEach(m),le=A(H),Y=X(H,"LI",{class:!0});var ue=Ge(Y);Ie=ge(ue,"Trip: "),$e=ge(ue,Se),ue.forEach(m),oe=A(H),W=X(H,"LI",{class:!0});var _e=Ge(W);we=ge(_e,"Shape: "),q(ee.$$.fragment,_e),_e.forEach(m),H.forEach(m),ke=A(i),q(te.$$.fragment,i),se=A(i),q(P.$$.fragment,i),me=A(i),q(re.$$.fragment,i),Ne=A(i),ie=X(i,"H2",{class:!0,id:!0});var be=Ge(ie);z=X(be,"A",{href:!0});var c=Ge(z);q(j.$$.fragment,c),ve=ge(c," details:"),c.forEach(m),be.forEach(m),Re=A(i),q(ae.$$.fragment,i),this.h()},h(){J(s,"name","twitter:card"),J(s,"content","summary"),J(e,"name","twitter:site"),J(e,"content","@evidence_dev"),J(M,"class","markdown"),J(F,"class","markdown"),J(Y,"class","markdown"),J(W,"class","markdown"),J(C,"class","markdown"),J(z,"href","#-details"),J(ie,"class","markdown"),J(ie,"id","-details")},m(i,n){w(i,t,n),ne.m(document.head,null),L(document.head,s),L(document.head,e),L(document.head,a),w(i,r,n),b&&b.m(i,n),w(i,o,n),G&&G.m(i,n),w(i,d,n),$&&$.m(i,n),w(i,p,n),g&&g.m(i,n),w(i,_,n),T&&T.m(i,n),w(i,Q,n),S&&S.m(i,n),w(i,v,n),k&&k.m(i,n),w(i,D,n),N&&N.m(i,n),w(i,y,n),w(i,M,n),w(i,h,n),w(i,C,n),L(C,F),L(F,fe),L(F,x),L(C,le),L(C,Y),L(Y,Ie),L(Y,$e),L(C,oe),L(C,W),L(W,we),E(ee,W,null),w(i,ke,n),E(te,i,n),w(i,se,n),E(P,i,n),w(i,me,n),E(re,i,n),w(i,Ne,n),w(i,ie,n),L(ie,z),E(j,z,null),L(z,ve),w(i,Re,n),E(ae,i,n),de=!0},p(i,n){ne.p(i,n),i[1]?b?(b.p(i,n),n[0]&2&&u(b,1)):(b=Ze(i),b.c(),u(b,1),b.m(o.parentNode,o)):b&&(ce(),f(b,1,1,()=>{b=null}),he()),i[2]?G?(G.p(i,n),n[0]&4&&u(G,1)):(G=xe(i),G.c(),u(G,1),G.m(d.parentNode,d)):G&&(ce(),f(G,1,1,()=>{G=null}),he()),i[3]?$?($.p(i,n),n[0]&8&&u($,1)):($=et(i),$.c(),u($,1),$.m(p.parentNode,p)):$&&(ce(),f($,1,1,()=>{$=null}),he()),i[4]?g?(g.p(i,n),n[0]&16&&u(g,1)):(g=tt(i),g.c(),u(g,1),g.m(_.parentNode,_)):g&&(ce(),f(g,1,1,()=>{g=null}),he()),i[5]?T?(T.p(i,n),n[0]&32&&u(T,1)):(T=st(i),T.c(),u(T,1),T.m(Q.parentNode,Q)):T&&(ce(),f(T,1,1,()=>{T=null}),he()),i[6]?S?(S.p(i,n),n[0]&64&&u(S,1)):(S=rt(i),S.c(),u(S,1),S.m(v.parentNode,v)):S&&(ce(),f(S,1,1,()=>{S=null}),he()),i[7]?k?(k.p(i,n),n[0]&128&&u(k,1)):(k=it(i),k.c(),u(k,1),k.m(D.parentNode,D)):k&&(ce(),f(k,1,1,()=>{k=null}),he()),i[8]?N?(N.p(i,n),n[0]&256&&u(N,1)):(N=at(i),N.c(),u(N,1),N.m(y.parentNode,y)):N&&(ce(),f(N,1,1,()=>{N=null}),he()),(!de||n[0]&1)&&Te!==(Te=i[0].selected_route.value+"")&&De(x,Te),(!de||n[0]&1)&&Se!==(Se=i[0].selected_trip.value+"")&&De($e,Se);const H={};n[0]&32&&(H.data=i[5]),ee.$set(H);const Z={};n[0]&128&&(Z.data=i[7]),n[2]&2&&(Z.$$scope={dirty:n,ctx:i}),te.$set(Z);const ue={};n[0]&64&&(ue.data=i[6]),n[2]&2&&(ue.$$scope={dirty:n,ctx:i}),P.$set(ue);const _e={};n[0]&2&&(_e.data=i[1]),n[2]&2&&(_e.$$scope={dirty:n,ctx:i}),re.$set(_e);const be={};n[0]&256&&(be.data=i[8]),j.$set(be);const c={};n[0]&18|n[2]&2&&(c.$$scope={dirty:n,ctx:i}),ae.$set(c)},i(i){de||(u(b),u(G),u($),u(g),u(T),u(S),u(k),u(N),u(ee.$$.fragment,i),u(te.$$.fragment,i),u(P.$$.fragment,i),u(re.$$.fragment,i),u(j.$$.fragment,i),u(ae.$$.fragment,i),de=!0)},o(i){f(b),f(G),f($),f(g),f(T),f(S),f(k),f(N),f(ee.$$.fragment,i),f(te.$$.fragment,i),f(P.$$.fragment,i),f(re.$$.fragment,i),f(j.$$.fragment,i),f(ae.$$.fragment,i),de=!1},d(i){i&&(m(t),m(r),m(o),m(d),m(p),m(_),m(Q),m(v),m(D),m(y),m(M),m(h),m(C),m(ke),m(se),m(me),m(Ne),m(ie),m(Re)),ne.d(i),m(s),m(e),m(a),b&&b.d(i),G&&G.d(i),$&&$.d(i),g&&g.d(i),T&&T.d(i),S&&S.d(i),k&&k.d(i),N&&N.d(i),I(ee),I(te,i),I(P,i),I(re,i),I(j),I(ae,i)}}}function xt(l,t,s){let e,a;Je(l,It,c=>s(43,e=c)),Je(l,Be,c=>s(49,a=c));let{data:r}=t,{data:o={},customFormattingSettings:d,__db:p,inputs:_}=r;mt(Be,a="2b6c1db65c289f379997e7e319f8d0a4",a);let Q=qt($t(_));dt(Q.subscribe(c=>s(0,_=c))),ct(Rt,{getCustomFormats:()=>d.customFormats||[]});const v=(c,ot)=>Et(p.query,c,{query_name:ot});kt(v);let D;const y=()=>{D||(D=setTimeout(()=>{We.add({id:"LoadingToast",title:"",message:"Loading...",status:"info"},0)},3e3))},M=()=>{D?(clearTimeout(D),D=null):We.dismiss("LoadingToast")};Pe(()=>(B.addEventListener("inFlightQueryStart",y),B.addEventListener("inFlightQueryEnd",M),B.QueriesLoading&&y(),()=>{B.removeEventListener("inFlightQueryStart",y),B.removeEventListener("inFlightQueryEnd",M)})),e.params,Pe(()=>!0);let U={initialData:void 0,initialError:void 0},h=V`select GTFS.stops.stop_id, stop_lat, stop_lon, stop_name, arrival_time, stop_sequence
from GTFS.stops JOIN GTFS.stop_times ON (GTFS.stop_times.stop_id = GTFS.stops.stop_id and GTFS.stop_times.trip_id = '${_.selected_trip.value}')
order by stop_sequence`,C=`select GTFS.stops.stop_id, stop_lat, stop_lon, stop_name, arrival_time, stop_sequence
from GTFS.stops JOIN GTFS.stop_times ON (GTFS.stop_times.stop_id = GTFS.stops.stop_id and GTFS.stop_times.trip_id = '${_.selected_trip.value}')
order by stop_sequence`;o.stops_data&&(o.stops_data instanceof Error?U.initialError=o.stops_data:U.initialData=o.stops_data,o.stops_columns&&(U.knownColumns=o.stops_columns));let F,fe=!1;const Te=B.createReactive({callback:c=>{s(1,F=c)},execFn:v},{id:"stops",...U});Te(C,{noResolve:h,...U}),globalThis[Symbol.for("stops")]={get value(){return F}};let x={initialData:void 0,initialError:void 0},le=V`select stop_id from GTFS.stop_times where trip_id = '${_.selected_trip.value}'`,Y=`select stop_id from GTFS.stop_times where trip_id = '${_.selected_trip.value}'`;o.stop_times_stops_data&&(o.stop_times_stops_data instanceof Error?x.initialError=o.stop_times_stops_data:x.initialData=o.stop_times_stops_data,o.stop_times_stops_columns&&(x.knownColumns=o.stop_times_stops_columns));let Ie,Se=!1;const $e=B.createReactive({callback:c=>{s(2,Ie=c)},execFn:v},{id:"stop_times_stops",...x});$e(Y,{noResolve:le,...x}),globalThis[Symbol.for("stop_times_stops")]={get value(){return Ie}};let oe={initialData:void 0,initialError:void 0},W=V`select * from GTFS.stop_times where trip_id = '${_.selected_trip.value}'`,we=`select * from GTFS.stop_times where trip_id = '${_.selected_trip.value}'`;o.stop_times_data&&(o.stop_times_data instanceof Error?oe.initialError=o.stop_times_data:oe.initialData=o.stop_times_data,o.stop_times_columns&&(oe.knownColumns=o.stop_times_columns));let ee,ke=!1;const te=B.createReactive({callback:c=>{s(3,ee=c)},execFn:v},{id:"stop_times",...oe});te(we,{noResolve:W,...oe}),globalThis[Symbol.for("stop_times")]={get value(){return ee}};let se={initialData:void 0,initialError:void 0},P=V`select * from GTFS.shapes where shape_id in (select shape_id from GTFS.trips where trip_id like '${_.selected_trip.value}')`,me=`select * from GTFS.shapes where shape_id in (select shape_id from GTFS.trips where trip_id like '${_.selected_trip.value}')`;o.shapes_data&&(o.shapes_data instanceof Error?se.initialError=o.shapes_data:se.initialData=o.shapes_data,o.shapes_columns&&(se.knownColumns=o.shapes_columns));let re,Ne=!1;const ie=B.createReactive({callback:c=>{s(4,re=c)},execFn:v},{id:"shapes",...se});ie(me,{noResolve:P,...se}),globalThis[Symbol.for("shapes")]={get value(){return re}};let z={initialData:void 0,initialError:void 0},j=V`select shape_id from GTFS.trips where trip_id like '${_.selected_trip.value}'`,ve=`select shape_id from GTFS.trips where trip_id like '${_.selected_trip.value}'`;o.trips_shapeid_data&&(o.trips_shapeid_data instanceof Error?z.initialError=o.trips_shapeid_data:z.initialData=o.trips_shapeid_data,o.trips_shapeid_columns&&(z.knownColumns=o.trips_shapeid_columns));let Re,ae=!1;const de=B.createReactive({callback:c=>{s(5,Re=c)},execFn:v},{id:"trips_shapeid",...z});de(ve,{noResolve:j,...z}),globalThis[Symbol.for("trips_shapeid")]={get value(){return Re}};let Fe={initialData:void 0,initialError:void 0},qe=V`select trip_id from GTFS.trips where route_id = '${_.selected_route.value}'`,ne=`select trip_id from GTFS.trips where route_id = '${_.selected_route.value}'`;o.trips_tripid_data&&(o.trips_tripid_data instanceof Error?Fe.initialError=o.trips_tripid_data:Fe.initialData=o.trips_tripid_data,o.trips_tripid_columns&&(Fe.knownColumns=o.trips_tripid_columns));let b,G=!1;const $=B.createReactive({callback:c=>{s(6,b=c)},execFn:v},{id:"trips_tripid",...Fe});$(ne,{noResolve:qe,...Fe}),globalThis[Symbol.for("trips_tripid")]={get value(){return b}};let g={initialData:void 0,initialError:void 0},T=V`select *, route_id || ' ' || route_long_name as displayName from GTFS.routes`,S="select *, route_id || ' ' || route_long_name as displayName from GTFS.routes";o.routes_data&&(o.routes_data instanceof Error?g.initialError=o.routes_data:g.initialData=o.routes_data,o.routes_columns&&(g.knownColumns=o.routes_columns));let k,N=!1;const i=B.createReactive({callback:c=>{s(7,k=c)},execFn:v},{id:"routes",...g});i(S,{noResolve:T,...g}),globalThis[Symbol.for("routes")]={get value(){return k}};let n={initialData:void 0,initialError:void 0},H=V`select 
    GTFS.trips.trip_id, trip_headsign || ' - ' ||
    case 
    when monday = true then 'Monday'
    when tuesday = true then 'Tuesday'
    when wednesday = true then 'Wednesday'
    when thursday = true then 'Thursday'
    when friday = true then 'Friday'
    when saturday = true then 'Saturday'
    when sunday = true then 'Sunday'
    end || ' @ ' || arrival_time as displayName
from (GTFS.trips NATURAL JOIN GTFS.calendar) INNER JOIN GTFS.stop_times on GTFS.trips.trip_id = GTFS.stop_times.trip_id and GTFS.stop_times.stop_sequence = 1
where GTFS.trips.trip_id = '${_.selected_trip.value}'`,Z=`select 
    GTFS.trips.trip_id, trip_headsign || ' - ' ||
    case 
    when monday = true then 'Monday'
    when tuesday = true then 'Tuesday'
    when wednesday = true then 'Wednesday'
    when thursday = true then 'Thursday'
    when friday = true then 'Friday'
    when saturday = true then 'Saturday'
    when sunday = true then 'Sunday'
    end || ' @ ' || arrival_time as displayName
from (GTFS.trips NATURAL JOIN GTFS.calendar) INNER JOIN GTFS.stop_times on GTFS.trips.trip_id = GTFS.stop_times.trip_id and GTFS.stop_times.stop_sequence = 1
where GTFS.trips.trip_id = '${_.selected_trip.value}'`;o.select_trip_details_data&&(o.select_trip_details_data instanceof Error?n.initialError=o.select_trip_details_data:n.initialData=o.select_trip_details_data,o.select_trip_details_columns&&(n.knownColumns=o.select_trip_details_columns));let ue,_e=!1;const be=B.createReactive({callback:c=>{s(8,ue=c)},execFn:v},{id:"select_trip_details",...n});return be(Z,{noResolve:H,...n}),globalThis[Symbol.for("select_trip_details")]={get value(){return ue}},l.$$set=c=>{"data"in c&&s(9,r=c.data)},l.$$.update=()=>{l.$$.dirty[0]&512&&s(10,{data:o={},customFormattingSettings:d,__db:p}=r,o),l.$$.dirty[0]&1024&&Nt.set(Object.keys(o).length>0),l.$$.dirty[1]&4096&&e.params,l.$$.dirty[0]&1&&s(12,h=V`select GTFS.stops.stop_id, stop_lat, stop_lon, stop_name, arrival_time, stop_sequence
from GTFS.stops JOIN GTFS.stop_times ON (GTFS.stop_times.stop_id = GTFS.stops.stop_id and GTFS.stop_times.trip_id = '${_.selected_trip.value}')
order by stop_sequence`),l.$$.dirty[0]&1&&s(13,C=`select GTFS.stops.stop_id, stop_lat, stop_lon, stop_name, arrival_time, stop_sequence
from GTFS.stops JOIN GTFS.stop_times ON (GTFS.stop_times.stop_id = GTFS.stops.stop_id and GTFS.stop_times.trip_id = '${_.selected_trip.value}')
order by stop_sequence`),l.$$.dirty[0]&30720&&(h||!fe?h||(Te(C,{noResolve:h,...U}),s(14,fe=!0)):Te(C,{noResolve:h})),l.$$.dirty[0]&1&&s(16,le=V`select stop_id from GTFS.stop_times where trip_id = '${_.selected_trip.value}'`),l.$$.dirty[0]&1&&s(17,Y=`select stop_id from GTFS.stop_times where trip_id = '${_.selected_trip.value}'`),l.$$.dirty[0]&491520&&(le||!Se?le||($e(Y,{noResolve:le,...x}),s(18,Se=!0)):$e(Y,{noResolve:le})),l.$$.dirty[0]&1&&s(20,W=V`select * from GTFS.stop_times where trip_id = '${_.selected_trip.value}'`),l.$$.dirty[0]&1&&s(21,we=`select * from GTFS.stop_times where trip_id = '${_.selected_trip.value}'`),l.$$.dirty[0]&7864320&&(W||!ke?W||(te(we,{noResolve:W,...oe}),s(22,ke=!0)):te(we,{noResolve:W})),l.$$.dirty[0]&1&&s(24,P=V`select * from GTFS.shapes where shape_id in (select shape_id from GTFS.trips where trip_id like '${_.selected_trip.value}')`),l.$$.dirty[0]&1&&s(25,me=`select * from GTFS.shapes where shape_id in (select shape_id from GTFS.trips where trip_id like '${_.selected_trip.value}')`),l.$$.dirty[0]&125829120&&(P||!Ne?P||(ie(me,{noResolve:P,...se}),s(26,Ne=!0)):ie(me,{noResolve:P})),l.$$.dirty[0]&1&&s(28,j=V`select shape_id from GTFS.trips where trip_id like '${_.selected_trip.value}'`),l.$$.dirty[0]&1&&s(29,ve=`select shape_id from GTFS.trips where trip_id like '${_.selected_trip.value}'`),l.$$.dirty[0]&2013265920&&(j||!ae?j||(de(ve,{noResolve:j,...z}),s(30,ae=!0)):de(ve,{noResolve:j})),l.$$.dirty[0]&1&&s(32,qe=V`select trip_id from GTFS.trips where route_id = '${_.selected_route.value}'`),l.$$.dirty[0]&1&&s(33,ne=`select trip_id from GTFS.trips where route_id = '${_.selected_route.value}'`),l.$$.dirty[1]&15&&(qe||!G?qe||($(ne,{noResolve:qe,...Fe}),s(34,G=!0)):$(ne,{noResolve:qe})),l.$$.dirty[1]&240&&(T||!N?T||(i(S,{noResolve:T,...g}),s(38,N=!0)):i(S,{noResolve:T})),l.$$.dirty[0]&1&&s(40,H=V`select 
    GTFS.trips.trip_id, trip_headsign || ' - ' ||
    case 
    when monday = true then 'Monday'
    when tuesday = true then 'Tuesday'
    when wednesday = true then 'Wednesday'
    when thursday = true then 'Thursday'
    when friday = true then 'Friday'
    when saturday = true then 'Saturday'
    when sunday = true then 'Sunday'
    end || ' @ ' || arrival_time as displayName
from (GTFS.trips NATURAL JOIN GTFS.calendar) INNER JOIN GTFS.stop_times on GTFS.trips.trip_id = GTFS.stop_times.trip_id and GTFS.stop_times.stop_sequence = 1
where GTFS.trips.trip_id = '${_.selected_trip.value}'`),l.$$.dirty[0]&1&&s(41,Z=`select 
    GTFS.trips.trip_id, trip_headsign || ' - ' ||
    case 
    when monday = true then 'Monday'
    when tuesday = true then 'Tuesday'
    when wednesday = true then 'Wednesday'
    when thursday = true then 'Thursday'
    when friday = true then 'Friday'
    when saturday = true then 'Saturday'
    when sunday = true then 'Sunday'
    end || ' @ ' || arrival_time as displayName
from (GTFS.trips NATURAL JOIN GTFS.calendar) INNER JOIN GTFS.stop_times on GTFS.trips.trip_id = GTFS.stop_times.trip_id and GTFS.stop_times.stop_sequence = 1
where GTFS.trips.trip_id = '${_.selected_trip.value}'`),l.$$.dirty[1]&3840&&(H||!_e?H||(be(Z,{noResolve:H,...n}),s(42,_e=!0)):be(Z,{noResolve:H}))},s(36,T=V`select *, route_id || ' ' || route_long_name as displayName from GTFS.routes`),s(37,S="select *, route_id || ' ' || route_long_name as displayName from GTFS.routes"),[_,F,Ie,ee,re,Re,b,k,ue,r,o,U,h,C,fe,x,le,Y,Se,oe,W,we,ke,se,P,me,Ne,z,j,ve,ae,Fe,qe,ne,G,g,T,S,N,n,H,Z,_e,e]}class ps extends Qe{constructor(t){super(),Me(this,t,xt,Zt,Ae,{data:9},null,[-1,-1,-1])}}export{ps as component};
