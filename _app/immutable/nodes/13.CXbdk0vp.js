import{s as z,a as k,e as R,b as G,c as w,h as K,d as M,f as h,i as E,j as q,k as C,l as N,m as X,o as Y,p as B,q as D,n as I}from"../chunks/scheduler.CwZefb0o.js";import{S as J,i as W,b as P,d as U,m as V,t as b,a as F,c as Z,e as $,g as tt}from"../chunks/index.RfiDZozx.js";import"../chunks/VennDiagram.svelte_svelte_type_style_lang.DO7fS-r7.js";import{w as et}from"../chunks/entry.BUeAk5M5.js";import{s as st,Q as g,p as ot,r as H,C as at,t as O}from"../chunks/inferColumnTypes.B7BPdMWL.js";import{h as j}from"../chunks/setTrackProxy.Cyfckp0w.js";import{e as rt,p as nt}from"../chunks/inputs.B-6hjrb4.js";import{p as it}from"../chunks/stores.BeSvxQIP.js";import{Q as lt}from"../chunks/QueryViewer.CF_UXxUI.js";import{P as ut}from"../chunks/PointMap.CE7jSVD5.js";function mt(n){return{c(){this.h()},l(r){this.h()},h(){document.title="Evidence"},m:I,p:I,d:I}}function A(n){let r,o;return r=new lt({props:{queryID:"stops",queryResult:n[0]}}),{c(){P(r.$$.fragment)},l(s){U(r.$$.fragment,s)},m(s,l){V(r,s,l),o=!0},p(s,l){const u={};l&1&&(u.queryResult=s[0]),r.$set(u)},i(s){o||(b(r.$$.fragment,s),o=!0)},o(s){F(r.$$.fragment,s),o=!1},d(s){$(r,s)}}}function ct(n){let r,o,s,l,u,i,c,_;function T(t,a){return mt}let f=T()(n),e=n[0]&&A(n);return c=new ut({props:{data:n[0],lat:"stop_lat",long:"stop_lon",pointName:"stop_id","height:":!0,600:!0}}),{c(){r=k(),f.c(),o=R("meta"),s=R("meta"),l=G(),u=k(),e&&e.c(),i=k(),P(c.$$.fragment),this.h()},l(t){r=w(t);const a=K("svelte-1j2izld",document.head);f.l(a),o=M(a,"META",{name:!0,content:!0}),s=M(a,"META",{name:!0,content:!0}),l=G(),a.forEach(h),u=w(t),e&&e.l(t),i=w(t),U(c.$$.fragment,t),this.h()},h(){E(o,"name","twitter:card"),E(o,"content","summary"),E(s,"name","twitter:site"),E(s,"content","@evidence_dev")},m(t,a){q(t,r,a),f.m(document.head,null),C(document.head,o),C(document.head,s),C(document.head,l),q(t,u,a),e&&e.m(t,a),q(t,i,a),V(c,t,a),_=!0},p(t,[a]){f.p(t,a),t[0]?e?(e.p(t,a),a&1&&b(e,1)):(e=A(t),e.c(),b(e,1),e.m(i.parentNode,i)):e&&(tt(),F(e,1,1,()=>{e=null}),Z());const p={};a&1&&(p.data=t[0]),c.$set(p)},i(t){_||(b(e),b(c.$$.fragment,t),_=!0)},o(t){F(e),F(c.$$.fragment,t),_=!1},d(t){t&&(h(r),h(u),h(i)),f.d(t),h(o),h(s),h(l),e&&e.d(t),$(c,t)}}}function pt(n,r,o){let s,l;N(n,it,m=>o(7,s=m)),N(n,H,m=>o(14,l=m));let{data:u}=r,{data:i={},customFormattingSettings:c,__db:_,inputs:T}=u;X(H,l="884114bf78c720b2cf6f01aad99cf8e6",l);let L=rt(et(T));Y(L.subscribe(m=>T=m)),B(at,{getCustomFormats:()=>c.customFormats||[]});const f=(m,x)=>nt(_.query,m,{query_name:x});st(f);let e;const t=()=>{e||(e=setTimeout(()=>{O.add({id:"LoadingToast",title:"",message:"Loading...",status:"info"},0)},3e3))},a=()=>{e?(clearTimeout(e),e=null):O.dismiss("LoadingToast")};D(()=>(g.addEventListener("inFlightQueryStart",t),g.addEventListener("inFlightQueryEnd",a),g.QueriesLoading&&t(),()=>{g.removeEventListener("inFlightQueryStart",t),g.removeEventListener("inFlightQueryEnd",a)})),s.params,D(()=>!0);let p={initialData:void 0,initialError:void 0},d=j`select * from GTFS.stops`,y="select * from GTFS.stops";i.stops_data&&(i.stops_data instanceof Error?p.initialError=i.stops_data:p.initialData=i.stops_data,i.stops_columns&&(p.knownColumns=i.stops_columns));let v,S=!1;const Q=g.createReactive({callback:m=>{o(0,v=m)},execFn:f},{id:"stops",...p});return Q(y,{noResolve:d,...p}),globalThis[Symbol.for("stops")]={get value(){return v}},n.$$set=m=>{"data"in m&&o(1,u=m.data)},n.$$.update=()=>{n.$$.dirty&2&&o(2,{data:i={},customFormattingSettings:c,__db:_}=u,i),n.$$.dirty&4&&ot.set(Object.keys(i).length>0),n.$$.dirty&128&&s.params,n.$$.dirty&120&&(d||!S?d||(Q(y,{noResolve:d,...p}),o(6,S=!0)):Q(y,{noResolve:d}))},o(4,d=j`select * from GTFS.stops`),o(5,y="select * from GTFS.stops"),[v,u,i,p,d,y,S,s]}class vt extends J{constructor(r){super(),W(this,r,pt,ct,z,{data:1})}}export{vt as component};
